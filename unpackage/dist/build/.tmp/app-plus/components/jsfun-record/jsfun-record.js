(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/jsfun-record/jsfun-record"],{"0039":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},"1b20":function(e,t,n){"use strict";n.r(t);var a=n("3efb"),i=n.n(a);for(var c in a)"default"!==c&&function(e){n.d(t,e,function(){return a[e]})}(c);t["default"]=i.a},"3efb":function(e,t,n){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=e.getRecorderManager(),i=e.createInnerAudioContext(),c={name:"jsfun-record",props:{voicePath:{type:String,default:""},maxTime:{type:String,default:"60"},minTime:{type:String,default:"5"}},data:function(){return{isShow:!1,frame:50,recordTime:0,isshowyuan:!1,playing:0}},computed:{showRecordTime:function(){var e="",t=Math.floor(this.recordTime/60);t<10&&(e="0"+t);var n=this.recordTime%60;return e+=n<10?":0"+n:":"+n,e}},watch:{},onLoad:function(){e.authorize({scope:"scope.record",success:function(){}}),this.initValue()},onReady:function(){var t=this;a.onStop(function(e){console.log(n("recorder stop"+JSON.stringify(e)," at components\\jsfun-record\\jsfun-record.vue:96")),t.voicePath=e.tempFilePath});var i=e.createSelectorQuery();i.select(".canvas").boundingClientRect(),i.exec(function(e){t.tempw=e[0].width,t.temph=e[0].height});i=e.createSelectorQuery();i.select(".recording").boundingClientRect(),i.exec(function(e){t.tempw1=e[0].width})},methods:{moveHandle:function(){return!1},initValue:function(){},showPicker:function(){var e=this;setTimeout(function(){e.isShow=!0},100)},closePicker:function(){this.isShow=!1,this.initValue(),this.stopVoice()},okClick:function(){this.$emit("okClick",this.voicePath),this.closePicker()},start:function(){this.stopVoice(),this.voicePath="",this.recordTime=0,this.canvasObj=e.createCanvasContext("canvas")},end:function(){var t=this.recordTime;if(clearInterval(this.timeObj),clearInterval(this.drawObj),this.recordTime=0,this.isshowyuan=!1,this.canvasObj.setFillStyle("#fff"),this.canvasObj.fillRect(0,0,this.canvasObj.width,this.canvasObj.height),this.canvasObj.draw(),t<this.minTime)return!(t<=0)&&(e.showToast({title:"不能小于"+this.minTime+"秒,请重新录制",icon:"none"}),!1);a.stop()},record:function(){var t=this;t.isshowyuan=!0,a.start(),t.timeObj=setInterval(function(){t.recordTime++,t.recordTime==t.maxTime&&t.end()},1e3);var n=0;switch(e.getSystemInfoSync().platform){case"android":n=0;break;case"ios":n=1;break;default:n=1;break}var i=t.tempw/2+n,c=t.temph/2+n,o=t.tempw1/2+4;t.canvasObj.beginPath(),t.canvasObj.setStrokeStyle("#fe3b54"),t.canvasObj.setGlobalAlpha(.3),t.canvasObj.setLineWidth(3),t.canvasObj.arc(i,c,o,0,2*Math.PI),t.canvasObj.stroke(),t.canvasObj.draw();var r=-.5;t.drawObj=setInterval(function(){t.canvasObj.beginPath(),t.canvasObj.setStrokeStyle("#fe3b54"),t.canvasObj.setGlobalAlpha(1),t.canvasObj.setLineWidth(3),t.canvasObj.arc(i,c,o,-.5*Math.PI,(r+=2/(1e3*t.maxTime/t.frame))*Math.PI,!1),t.canvasObj.stroke(),t.canvasObj.draw(!0)},t.frame)},playVoice:function(){this.voicePath&&(i.src=this.voicePath,i.play(),this.playing=1)},stopVoice:function(){i.stop(),this.playing=0}}};t.default=c}).call(this,n("6e42")["default"],n("0de9")["default"])},"8ed9e":function(e,t,n){},c42a:function(e,t,n){"use strict";n.r(t);var a=n("0039"),i=n("1b20");for(var c in i)"default"!==c&&function(e){n.d(t,e,function(){return i[e]})}(c);n("f6b7");var o=n("2877"),r=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=r.exports},f6b7:function(e,t,n){"use strict";var a=n("8ed9e"),i=n.n(a);i.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/jsfun-record/jsfun-record-create-component',
    {
        'components/jsfun-record/jsfun-record-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("c42a"))
        })
    },
    [['components/jsfun-record/jsfun-record-create-component']]
]);
