(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/template/im-chat/im-chat"],{"0837":function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=function(){return n.e("components/im-chat/chatinput").then(n.bind(null,"8e36"))},i=function(){return n.e("components/im-chat/messageshow").then(n.bind(null,"fc5c"))},a={data:function(){return{name:"xcecd@qq.com",style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},scrollTop:0,messages:[{user:"home",type:"head",content:"你好!"}]}},components:{chatInput:c,messageShow:i},onLoad:function(){var t=e.getSystemInfoSync();this.style.pageHeight=t.windowHeight,this.style.contentViewHeight=t.windowHeight-e.getSystemInfoSync().screenWidth/750*100},methods:{getInputMessage:function(e){this.addMessage("customer",e.content,!1),this.toRobot(e.content)},addMessage:function(e,t,n,o){var c=this;c.messages.push({user:e,content:t,hasSub:n,subcontent:o})},scrollToBottom:function(){var t=this,n=e.createSelectorQuery();n.selectAll(".m-item").boundingClientRect(),n.select("#scrollview").boundingClientRect(),n.exec(function(e){t.style.mitemHeight=0,e[0].forEach(function(e){t.style.mitemHeight=t.style.mitemHeight+e.height+20}),t.style.mitemHeight>t.style.contentViewHeight&&(t.scrollTop=t.style.mitemHeight-t.style.contentViewHeight)})},toRobot:function(t){var n=this,c="http://www.tuling123.com/openapi/api";e.request({url:c,data:{key:"acfbca724ea1b5db96d2eef88ce677dc",info:t,userid:"uni-test"},success:function(e){console.log(o("s",e," at pages\\template\\im-chat\\im-chat.vue:93")),n.addMessage("home",e.data.text,!1),n.scrollToBottom(),console.log(o("request success:"+e.data.text," at pages\\template\\im-chat\\im-chat.vue:96"))},fail:function(t){console.log(o("request fail",t," at pages\\template\\im-chat\\im-chat.vue:99")),e.showModal({content:t.errMsg,showCancel:!1})}})}}};t.default=a}).call(this,n("6e42")["default"],n("0de9")["default"])},"4ede":function(e,t,n){"use strict";(function(e){n("ee7a"),n("921b");o(n("66fd"));var t=o(n("eee3"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},6385:function(e,t,n){"use strict";n.r(t);var o=n("0837"),c=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t["default"]=c.a},"7dc9":function(e,t,n){},eee3:function(e,t,n){"use strict";n.r(t);var o=n("f057"),c=n("6385");for(var i in c)"default"!==i&&function(e){n.d(t,e,function(){return c[e]})}(i);n("f951");var a=n("2877"),s=Object(a["a"])(c["default"],o["a"],o["b"],!1,null,null,null);t["default"]=s.exports},f057:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},c=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c})},f951:function(e,t,n){"use strict";var o=n("7dc9"),c=n.n(o);c.a}},[["4ede","common/runtime","common/vendor"]]]);