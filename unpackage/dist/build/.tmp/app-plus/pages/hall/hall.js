(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/hall/hall"],{"514c":function(e,t,a){"use strict";a.r(t);var n=a("ed2b"),o=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t["default"]=o.a},"7c21":function(e,t,a){"use strict";var n=a("cda8"),o=a.n(n);o.a},"872e":function(e,t,a){"use strict";a.r(t);var n=a("f6f8"),o=a("514c");for(var s in o)"default"!==s&&function(e){a.d(t,e,function(){return o[e]})}(s);a("7c21");var i=a("2877"),r=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);t["default"]=r.exports},cda8:function(e,t,a){},e86f:function(e,t,a){"use strict";(function(e){a("ee7a"),a("921b");n(a("66fd"));var t=n(a("872e"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},ed2b:function(e,t,a){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(a("fcaa"));function o(e){return e&&e.__esModule?e:{default:e}}var s=a("3936"),i=function(){return a.e("components/uni-popup/uni-popup").then(a.bind(null,"dcc0"))},r=function(){return a.e("components/uni-icons/uni-icons").then(a.bind(null,"f9e2"))},l=function(){return a.e("components/uni-nav-bar/uni-nav-bar").then(a.bind(null,"daa9"))},g=function(){return Promise.all([a.e("common/vendor"),a.e("components/mescroll-diy/mescroll-beibei")]).then(a.bind(null,"eaef"))},c=function(){return a.e("pages/hall/pd-list").then(a.bind(null,"148a"))},d=getApp().globalData.weburl,u=getApp().globalData.shop_type,m=getApp().globalData.wssurl,p=!1,_=[],f=[],h="",S=20,w=e.getStorageSync("username")?e.getStorageSync("username"):"",v=e.getStorageSync("token")?e.getStorageSync("token"):"1",y=(e.getStorageSync("openid")&&e.getStorageSync("openid"),e.getStorageSync("userInfo")?e.getStorageSync("userInfo"):""),x=e.getStorageSync("navList2")?e.getStorageSync("navList2"):[],k={data:function(){return{title_name:"送心",title_logo:"/static/images/footer-icon-05.png",img_discount:"/static/images/discount.png",img_service:d+"/uploads/service.png",img_service2:d+"/uploads/service2.png",default_img:d+"/uploads/default_goods_image.png",default_avatar:d+"/uploads/avatar.png",platform:"",pagesize:S,pageoffset:0,hidden:!0,resp_message:{},messageHidden:!0,notehidden:!1,dkheight:2e3,scrollTop:0,old:{scrollTop:0},current_scrollTop:0,scrollHeight:500,indicatorDots:!0,vertical:!1,autoplay:!0,interval:7e3,duration:300,circular:!0,hall_banner:d+"/uploads/songxin_banner.png",banner_link:"pages/list/list?navlist=1",gifts_rcv:0,gifts_send:0,messages_num:0,note:"",username:null,token:null,recommentslist:[],recommentslist_show:[],show_max:20,minusStatuses:[],selectedAllStatus:!0,total:"",startX:0,itemLefts:[],showmorehidden:!0,loadingHidden:!0,all_rows:0,rall_rows:0,windowWidth:380,windowHeight:1100,carts:[],cartIds:[],amount:0,nickname:y.nickName,avatarUrl:y.avatarUrl,userInfo:y,shop_type:u,navList2:x,socktBtnTitle:"连接socket",message:"",text:h,content:"",buyhidden1:!1,buyhidden2:!0,page:1,rpage_num:1,isPush:!1,toView:0,floorstatus:!1,touchstop:!1,loading_note:"",deleteindex:"",is_buymyself:"",middle1_img:"",middle2_img:"",middle3_img:"",middle4_img:"",middle5_img:"",middle6_img:"",middle7_img:"",middle8_img:"",middle1_title:"",middle2_title:"",middle3_title:"",middle4_title:"",middle5_title:"",middle6_title:"",middle7_title:"",middle8_title:"",middle1_note:"",middle2_note:"",middle3_note:"",middle4_note:"",middle5_note:"",middle6_note:"",middle7_note:"",middle8_note:"",refername:"",msg_id:"",art_id:"",art_cat_id:"",art_title:"",page_type:"",main_prom_image:"",main_prom_title:"",main_prom_note:"",deletecarthidden:!1,deletegooodsname:"",is_reloading:!1,status:"more",contentText:{contentdown:"上拉加载更多",contentrefresh:"加载中",contentnomore:"没有更多"},downOption:{auto:!1,use:!1,isLock:!0},upOption:{auto:!1,onScroll:!0,page:{num:0,size:20},noMoreSize:4,empty:{tip:"~ 空空如也 ~",btnText:"去看看"}},pdList:[],isInit:!1,scrollY:0}},components:{uniPopup:i,uniIcons:r,uniNavBar:l,MescrollUni:g,PdList:c},props:{},onLoad:function(t){var a=this,n=e.getStorageSync("username")?e.getStorageSync("username"):"",o=(e.getStorageSync("openid")&&e.getStorageSync("openid"),e.getStorageSync("token")&&e.getStorageSync("token"),a.shop_type),i=t.page_type?t.page_type:0,r=(t.order_no&&t.order_no,t.coupons&&t.coupons,t.receive&&t.receive,t.refername?t.refername:""),l=t.task?t.task:0,g=t.msg_id?t.msg_id:0,c=t.art_id?t.art_id:0,d=t.art_cat_id?t.art_cat_id:0,u=t.art_title?t.art_title:"",m="获取个人消息",p=(a.messages_num,s.formatTime(new Date));getApp().globalData.is_task=l;var f={addtime:p,username:n,shop_type:o,message:m,message_type:1};a.setData({message:JSON.stringify(f),refername:r,msg_id:g,art_id:c,art_cat_id:d,art_title:u,page_type:i}),(c>0||d>0)&&wx.navigateTo({url:"/pages/my/index?art_id="+c+"&art_cat_id="+d}),_.push(a.message),a.initSocketMessage(),setInterval(function(){a.initSocketMessage()},2e4),setInterval(function(){},5e3),a.get_project_gift_para(),a.reloadData(),a.sum()},onShow:function(){var t=this,a=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",n=wx.getStorageSync("username"),o=t.refername,s=e.getStorageSync("userInfo")?e.getStorageSync("userInfo"):"",i=t.msg_id,r=t.page_type,l=getCurrentPages();t.userInfo=s,e.getSystemInfo({success:function(e){var a=e.windowHeight,n=e.windowWidth;t.platform=e.platform,t.dkheight=a,t.winHeight=a,t.winWidth=n}}),t.query_cart(),t.get_project_gift_para(),l.length>1&&t.setData({title_logo:"../../images/back.png"}),n&&(2==r&&1==receive&&wx.navigateTo({url:"../order/receive/receive?order_no="+order_no+"&receive=1"}),3==r&&1==receive&&wx.navigateTo({url:"../member/couponrcv/couponrcv?coupons_flag="+coupons_flag+"&coupons_id"+coupons_id+"&receive=1"}),getApp().globalData.is_task>0&&(n!=o&&wx.setStorageSync("taskrefername",o),wx.request({url:d+"/api/client/get_task_refer",method:"POST",data:{username:n,access_token:a,shop_type:u,refername:o,msg_id:i,task:getApp().globalData.is_task},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){getApp().globalData.is_task=0}}),t.setData({messageHidden:!t.messageHidden,main_prom_image:t.navList2[10]["img"],main_prom_title:t.navList2[10]["title"]?t.navList2[10]["title"]:"送心礼物",main_prom_note:t.navList2[10]["note"]?t.navList2[10]["note"]:"送心礼物欢迎您！",notehidden:!t.notehidden}))),1==getApp().globalData.hall_gotop&&t.goTop()},onShareAppMessage:function(){return{title:"开启礼物电商时代,200万人都在用的礼物小程序",desc:"送心礼物欢迎您",path:"/pages/hall/hall?refername="+w+"&mainpage=1"}},mounted:function(){this.isInit=!0,this.mescroll.triggerDownScroll()},methods:{load:function(){var t=this;e.createSelectorQuery().selectAll(".lazy").boundingClientRect(function(e){e.forEach(function(e,a){e.top<=t.windowHeight&&(t.recommentslist[e.dataset.index].show=!0)})}).exec()},imageLoad:function(e){this.recommentslist[e.target.dataset.index].loaded=!0},getMoreGoodsTapTag:function(e){var t=this,a=t.page,n=t.rpage_num,o=t.is_reloading;o||(a>n&&1!=a?t.status="nomore":t.reloadData())},scroll:function(e){var t=this,a=(t.old.scrollTop,t.mescroll.scrollTop);t.old.scrollTop=a},goTop:function(){var e=this;wx.getStorageSync("navList2")&&wx.getStorageSync("navList2");e.pdList=[],e.page=1,e.pageoffset=0,e.mescroll.resetUpScroll(),getApp().globalData.hall_gotop=0,e.$nextTick(function(){e.mescroll.scrollTo(0)}),e.mescroll.scrollTop=e.old.scrollTop},searchTapTag:function(e){wx.navigateTo({url:"/pages/goods/list/list?search=1"})},reSend:function(){for(var e=f,t=0;t<e.length;t++)wx.sendSocketMessage({data:e[t],success:function(e){f.splice(t,1)},fail:function(e){wx.showToast({title:"网络故障",icon:"loading",duration:2e3})}})},initSocketMessage:function(){var e=this;p||(wx.connectSocket({url:m+"/wss"}),wx.onSocketError(function(t){p=!1,e.setData({socktBtnTitle:"连接socket"}),wx.hideToast()}),wx.onSocketOpen(function(t){wx.hideToast(),e.setData({socktBtnTitle:"断开socket"}),p=!0;var a=wx.getStorageSync("username")?wx.getStorageSync("username"):"",n=a+"_"+u;wx.sendSocketMessage({data:n});for(var o=0;o<_.length;o++)e.setData({message:_[o]}),e.sendSocketMessage()}),wx.onSocketMessage(function(t){wx.getStorageSync("username")&&wx.getStorageSync("username");var a=JSON.parse(t.data.trim(),!0),n=e.messageHidden;if("y"==a.status){var o=a.result,i=e.messages_num;if(o["title"]=o["title"]?o["title"]:"我的消息",o["start_time"]=s.getDateStr(1e3*o["start_time"],0),o["end_time"]=s.getDateStr(1e3*o["end_time"],0),e.resp_message=o,e.messages_num=i+1,"7"==o["type"]&&o["webview_url"]){var r=JSON.parse(o["content"].trim(),!0);e.main_prom_image=r["image"]?r["image"]:"",e.main_prom_title=o["title"]?o["title"]:"送心礼物",e.messageHidden=!n}}}),wx.onSocketClose(function(t){p=!1,console.log(n("WebSocket 已关闭！"," at pages\\hall\\hall.vue:865")),wx.hideToast(),e.setData({socktBtnTitle:"连接socket"})}))},sendSocketMessage:function(){var e=this,t=(wx.getStorageSync("username")&&wx.getStorageSync("username"),s.formatTime(new Date),e.message);p?(console.log(n("sendSocketMessage message:",t," at pages\\hall\\hall.vue:884")),wx.sendSocketMessage({data:t,success:function(e){console.log(n("sendSocketMessage 完成",e," at pages\\hall\\hall.vue:888"))},fail:function(e){console.log(n("sendSocketMessage 通讯失败"," at pages\\hall\\hall.vue:891")),wx.showToast({title:"网络故障",icon:"loading",duration:1500})}})):(_.push(t),e.initSocketMessage())},bindMiddleGoods:function(e){var t=e.currentTarget.dataset.goodsType,a=e.currentTarget.dataset.middleTitle;wx.navigateTo({url:"/pages/goods/list/list?goods_type_value="+t+"&middle_title="+a})},goBack:function(){var e=getCurrentPages();e.length>1?wx.navigateBack({changed:!0}):wx.switchTab({url:"../../hall/hall"})},bannerTapTag:function(e){var t=e.currentTarget.dataset.bannerlink;wx.navigateTo({url:t+"&username="+w+"&token="+v})},messagesTapTag:function(){var e=this;e.setData({messages_num:0}),getApp().globalData.messageflag=1,console.log(n("hall messagesTapTag: messageflag:",getApp().globalData.messageflag," at pages\\hall\\hall.vue:936")),wx.switchTab({url:"/pages/member/message/message"})},userTapTag:function(){wx.switchTab({url:"../my/index"})},usergiftTapTag:function(){wx.switchTab({url:"../index/index"})},bindTextAreaBlur:function(e){var t=this;t.setData({note:e.detail.value})},bindMinus:function(e){var t=this,a=parseInt(e.currentTarget.dataset.index),n=t.carts[a]["num"],o=n;o>1?n--:o=0;var s="normal",i=t.carts;i[a]["num"]=n;var r=t.minusStatuses;r[a]=s,t.setData({carts:i,minusStatuses:r});var l=wx.getStorageSync("username")?wx.getStorageSync("username"):"",g=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",c=i[a]["id"];t.updateCart(l,c,n,g),wx.hideLoading(),this.sum(),0==o&&(t.setData({deleteindex:a}),t.deleteFun())},bindPlus:function(e){var t=this,a=parseInt(e.currentTarget.dataset.index),n=t.carts[a]["num"];n++;var o=n<=1?"disabled":"normal",s=t.carts;s[a]["num"]=n;var i=t.minusStatuses;i[a]=o,t.setData({carts:s,minusStatuses:i});var r=wx.getStorageSync("username")?wx.getStorageSync("username"):"",l=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",g=s[a]["id"];t.updateCart(r,g,n,l),wx.hideLoading()},bindManual:function(e){wx.showLoading({title:"操作中",mask:!0});var t=parseInt(e.currentTarget.dataset.index),a=this.carts,n=parseInt(e.detail.value);a[t]["num"]=n,this.setData({carts:a}),wx.hideLoading(),this.sum()},bindManualTapped:function(){},bindCheckbox:function(e){wx.showLoading({title:"操作中",mask:!0});var t=this,a=parseInt(e.currentTarget.dataset.index),n=t.carts[a]["selected"],o=t.carts;o[a]["selected"]=!n,t.setData({carts:o});var s=wx.getStorageSync("username")?wx.getStorageSync("username"):"",i=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",r=o[a]["id"],l=o[a]["num"];t.updateCart(s,r,l,i),wx.hideLoading(),t.sum()},bindSelectAll:function(){wx.showLoading({title:"操作中",mask:!0});var e=this.selectedAllStatus;e=!e;for(var t=this.carts,a=0;a<t.length;a++)t[a]["selected"]=e;this.setData({selectedAllStatus:e,carts:t}),wx.hideLoading(),this.sum()},bindPickGoods:function(){wx.navigateTo({url:"/pages/list/list?username="+w+"&token="+v})},bindAIPickGoods:function(){getApp().globalData.messageflag=2,wx.switchTab({url:"/pages/member/message/message"})},bindCheckout:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],t),s="gift",i=n,r=[],l=a,g=[],c=e.getStorageSync("username")?e.getStorageSync("username"):"",d=e.getStorageSync("token")?e.getStorageSync("token"):"1",u=0,m=0,p=0;p<l.length;p++)l[p]["selected"]&&(r.push(l[p]["objectId"]),g[u++]=l[p],m+=l[p]["num"]*l[p]["sell_price"]);r=r.join(","),i||(i="送你一份礼物，希望你喜欢!"),0!=g.length?wx.navigateTo({url:"../order/checkout/checkout?cartIds="+r+"&amount="+m+"&carts="+JSON.stringify(g)+"&is_buymyself="+o+"&order_type="+s+"&order_note="+i+"&username="+c+"&token="+d}):wx.showToast({title:"礼物包是空的，先挑选礼物吧~",icon:"none",duration:1500})},formSubmit:function(e){var t=this,a=e.currentTarget.dataset.name;"sendgift"==a?t.is_buymyself=0:"buymyself"==a&&(t.is_buymyself=1),t.$options.methods.bindCheckout(t.is_buymyself,t.carts,t.note,t.total)},submintFromId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this),a=t.shop_type,n=wx.getStorageSync("username")?wx.getStorageSync("username"):"",o=wx.getStorageSync("token")?wx.getStorageSync("token"):"1";wx.request({url:d+"/api/client/save_member_formid",method:"POST",data:{username:n,access_token:o,formId:e,shop_type:a},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){}})},deleteFun:function(e){var t=this,a=0;e?(a=e.currentTarget.dataset.index?e.currentTarget.dataset.index:0,e.currentTarget.dataset.objectId):a=t.deleteindex,t.deletegooodsname=e.currentTarget.dataset.goodsName,t.deletecarthidden=!0,a=parseInt(a);t.carts;t.sku_id=t.carts[a]["id"]},delete_cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this,a=t.shop_type,n=wx.getStorageSync("username")?wx.getStorageSync("username"):"",o=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",s=t.sku_id,i=getApp().globalData.weburl,r=t.carts;t.deletecarthidden=!1,0!=e&&wx.request({url:i+"/api/client/delete_cart",method:"POST",data:{username:n,access_token:o,sku_id:s,shop_type:a},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){for(var a=[],n=0,o=0;o<r.length;o++)r[o]["id"]!=s&&(a[n++]=r[o]);if(0==a.length)var i=!0;else a.length,i=!0;t.setData({carts:a,showmorehidden:i})}})},get_cartIds:function(){for(var e=[],t=0;t<this.carts.length;t++)this.carts[t]["selected"]&&e.push(this.carts[t]["objectId"]);that.cartIds=e},sum:function(){for(var e=this,t=e.carts,a=0,n=0;n<t.length;n++)a+=t[n]["num"]*t[n]["sell_price"];a=a.toFixed(2),this.setData({carts:t,total:a})},showGoods:function(t){var a=t.id,n=wx.getStorageSync("username")?wx.getStorageSync("username"):"",o=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",s=t.goods_id?t.goods_id:t.id,i=t.goods_org,r=t.shape,l=t.name,g=t.sell_price,c=t.atc_info,d=t.sale,u=t.image?t.image:"",m=t.activity_image?t.activity_image:"";u=u||(m||""),getApp().globalData.hall_gotop=0;var p={sku_id:a,id:s,goods_shape:r,goods_org:i,goods_info:c,goods_price:g,sale:d,name:l,image:u,token:o,username:n};e.setStorageSync("show_goods_options",p),wx.navigateTo({url:"/pages/details/details?sku_id="+a+"&id="+s+"&goods_shape="+r+"&goods_org="+i+"&goods_info="+c+"&goods_price="+g+"&sale="+d+"&name="+l+"&image="+u+"&token="+o+"&username="+n})},updateCart:function(e,t,a,n){var o=this,s=o.shop_type,i=(n=o.token,getApp().globalData.weburl);wx.request({url:i+"/api/client/update_cart",method:"POST",data:{username:e,access_token:n,sku_id:t,buy_num:a,shop_type:s},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){}})},messageConfirm:function(){var e=this,t=e.messageHidden,a=e.resp_message;if(e.setData({messageHidden:!t,notehidden:!e.notehidden}),"6"==a["type"]&&wx.navigateTo({url:"/pages/member/task/task"}),"7"==a["type"]&&a["webview_url"]){var n=a["webview_url"];wx.navigateTo({url:"/pages/customerservice/customerservice?url="+n})}},messageCandel:function(){var e=this;e.setData({messageHidden:!0,notehidden:!e.notehidden})},query_cart:function(){var t=this,a=e.getStorageSync("username")?e.getStorageSync("username"):"",n=e.getStorageSync("openid")?e.getStorageSync("openid"):"",o=e.getStorageSync("token")?e.getStorageSync("token"):"1",s=[],i=t.shop_type,r=getApp().globalData.weburl;a&&e.request({url:r+"/api/client/query_cart",method:"POST",data:{username:a||n,access_token:o,shop_type:i},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){var a=[];if(e.data.result){var n=e.data.result.list,o=0;for(var i in n)for(var l=0;l<n[i]["sku_list"].length;l++)n[i]["sku_list"][l]["image"].indexOf("http")<0&&(n[i]["sku_list"][l]["image"]=r+"/"+n[i]["sku_list"][l]["image"]),n[i]["sku_list"][l]["selected"]=!0,n[i]["sku_list"][l]["shop_id"]=i,n[i]["sku_list"][l]["objectId"]=n[i]["sku_list"][l]["id"],o>1&&(n[i]["sku_list"][l]["hidden"]=1),a[o]=n[i]["sku_list"][l],s[o]=(n[i]["sku_list"][l]["num"],"normal"),o++;t.carts=a,t.minusStatuses=s}}})},mescrollInit:function(e){this.mescroll=e},downCallback:function(e){this.page=1,e.resetUpScroll()},upCallback:function(e){var t=this;this.getListDataFromNet(e.num,e.size,function(a){console.log(n("i="+t.i+", mescroll.num="+e.num+", mescroll.size="+e.size+", curPageData.length="+a.length," at pages\\hall\\hall.vue:1516")),e.endSuccess(a.length),1!=e.num&&1!=t.page||(t.pdList=[]),"n"==a?e.endByPage(t.page,t.all_rows):t.pdList=t.pdList.concat(a)},function(){e.endErr()})},emptyClick:function(){e.showToast({title:"点击了按钮,具体逻辑自行实现"})},getListDataFromNet:function(t,a,o,s){var i=this,r=e.getStorageSync("username")?e.getStorageSync("username"):"",l=e.getStorageSync("token")?e.getStorageSync("token"):"1",g=i.page,c=i.pagesize,m=i.pageoffset,p=i.all_rows;if(g>p&&g>1)return console.log(n("加载完成 page:",g,"all_rows:",p," at pages\\hall\\hall.vue:1552")),i.is_goodslist_loading=!1,void(o&&o("n"));i.is_goodslist_loading=!0,i.status="loading";try{wx.request({url:d+"/api/client/query_member_goods_prom",method:"POST",data:{username:r,access_token:l,shop_type:u,query_type:"app",page:g,pagesize:c,pageoffset:m},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){var t=e.data.result,a=e.data.all_rows,s=e.data.pageoffset;if(!t)return i.is_goodslist_loading=!1,void(o&&o(e.data.status));if(t){for(var r=0;r<t.length;r++)t[r]["short_name"]=t[r]["name"].substring(0,10)+"...",t[r]["act_info"]||(t[r]["act_info"]=""),t[r]["goods_tag"]?t[r]["goods_tag"]=t[r]["goods_tag"].substring(0,10):t[r]["goods_tag"]="",t[r]["activity_image"].indexOf("http")<0&&t[r]["activity_image"]&&(t[r]["activity_image"]=d+"/"+t[r]["activity_image"]),t[r]["image"].indexOf("http")<0&&t[r]["image"]&&(t[r]["image"]=d+"/"+t[r]["image"]),t[r]["image"]=t[r]["activity_image"]?t[r]["activity_image"]:t[r]["image"];i.page=g+1,i.pageoffset=s,i.all_rows=a,console.log(n("加载完成 page:",g,"venuesItems_new:",t," at pages\\hall\\hall.vue:1616")),o&&o(t)}}})}catch(_){s&&s()}},reloadData:function(){var t=this,a=e.getStorageSync("username")?e.getStorageSync("username"):"",n=e.getStorageSync("openid")?e.getStorageSync("openid"):"",o=e.getStorageSync("token")?e.getStorageSync("token"):"1",s=(t.page,t.pagesize,t.pageoffset,t.shop_type),i=getApp().globalData.weburl;t.status="loading",t.setData({is_reloading:!0,loadingHidden:!1});t.gifts_rcv,t.gifts_send,n=wx.getStorageSync("openid")?wx.getStorageSync("openid"):"";e.request({url:i+"/api/client/query_member_gift",method:"POST",data:{username:a||n,access_token:o,openid:n,shop_type:s},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){if(e.data.result){var a=e.data.result["giftgetnum"],n=e.data.result["giftsendnum"];t.setData({gifts_rcv:a,gifts_send:n})}}})},set_project_gift_para:function(){var e=this,t=wx.getStorageSync("navList2")?wx.getStorageSync("navList2"):"";e.navList2=t,e.hall_banner=t[3]?t[3]:hall_banner,e.middle1_img=t[11]?t[11]["img"]:"",e.middle2_img=t[12]?t[12]["img"]:"",e.middle3_img=t[13]?t[13]["img"]:"",e.middle4_img=t[14]?t[14]["img"]:"",e.middle5_img=t[15]?t[15]["img"]:"",e.middle6_img=t[16]?t[16]["img"]:"",e.middle7_img=t[17]?t[17]["img"]:"",e.middle8_img=t[18]?t[18]["img"]:"",e.middle1_title=t[11]?t[11]["title"]:"",e.middle2_title=t[12]?t[12]["title"]:"",e.middle3_title=t[13]?t[13]["title"]:"",e.middle4_title=t[14]?t[14]["title"]:"",e.middle5_title=t[15]?t[15]["title"]:"",e.middle6_title=t[16]?t[16]["title"]:"",e.middle7_title=t[17]?t[17]["title"]:"",e.middle8_title=t[18]?t[18]["title"]:"",e.middle1_note=t[11]?t[17]["note"]:"",e.middle2_note=t[12]?t[12]["note"]:"",e.middle3_note=t[13]?t[13]["note"]:"",e.middle4_note=t[14]?t[14]["note"]:"",e.middle5_note=t[15]?t[15]["note"]:"",e.middle6_note=t[16]?t[16]["note"]:"",e.middle7_note=t[17]?t[17]["note"]:"",e.middle8_note=t[18]?t[18]["note"]:""},get_project_gift_para:function(){var e=this,t=wx.getStorageSync("navList2")?wx.getStorageSync("navList2"):"";e.hall_banner;t?e.set_project_gift_para():wx.request({url:d+"/api/client/get_project_gift_para",method:"POST",data:{type:2,query_type:"APP",shop_type:u},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(a){t=a.data.result,t&&(wx.setStorageSync("navList2",t),e.set_project_gift_para())}})},imageError:function(e){var t=this,a=e.target.dataset.imageindex,n=t.default_img,o="recommentslist_show["+a+"].image",s={};s[o]=n,t.setData(s)},BuyModeChange:function(e){var t=this;t.buyhidden1=e.detail.value},setData:function(e){var t,a,n=this,o=[];Object.keys(e).forEach(function(s){o=s.split("."),t=e[s],a=n.$data,o.forEach(function(e,s){s+1==o.length?n.$set(a,e,t):a[e]||n.$set(a,e,{}),a=a[e]})})}}};t.default=k}).call(this,a("6e42")["default"],a("0de9")["default"])},f6f8:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})}},[["e86f","common/runtime","common/vendor"]]]);