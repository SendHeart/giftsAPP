(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/activity"],{"00fe":function(t,e,a){"use strict";a.r(e);var i=a("4678"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},4678:function(t,e,a){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a("3936");var n=getApp().globalData.weburl,o=getApp().globalData.shop_type,c=getApp().globalData.appid,r=getApp().globalData.secret,s=1,l=wx.getStorageSync("username")?wx.getStorageSync("username"):"",u=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",g=(wx.getStorageSync("openid")&&wx.getStorageSync("openid"),wx.getStorageSync("userInfo")?wx.getStorageSync("userInfo"):""),d=[{id:"activity_banner",title:"感恩节活动",value:"",img:"/uploads/activity_info/activity_banner.gif"},{id:"activity_footer",title:"活动说明",value:"",img:"/uploads/activity_info/activity_footer.png"},{id:"activity_sub1_banner",title:"活动商品列表1",value:"",img:"/uploads/activity_info/activity_1_banner.gif"},{id:"activity_sub2_banner",title:"活动商品列表2",value:"",img:"/uploads/activity_info/activity_2_banner.gif"},{id:"activity_sub3_banner",title:"活动商品列表3",value:"",img:"/uploads/activity_info/activity_3_banner.gif"},{id:"activity_sub4_banner",title:"活动商品列表4",value:"",img:"/uploads/activity_info/activity_4_banner.gif"},{id:"activity_sub5_banner",title:"活动商品列表5",value:"",img:"/uploads/activity_info/activity_5_banner.gif"},{id:"activity_sub6_banner",title:"活动商品列表6",value:"",img:"/uploads/activity_info/activity_6_banner.gif"},{id:"activity_sub7_banner",title:"活动商品列表7",value:"",img:"/uploads/activity_info/activity_7_banner.gif"},{id:"activity_sub8_banner",title:"活动商品列表8",value:"",img:"/uploads/activity_info/activity_8_banner.gif"}],_={data:function(){return{title_name:"送心活动",title_logo:"/images/footer-icon-05.png",img_discount:"/images/discount.png",hidden:!0,scrollTop:0,scrollHeight:0,indicatorDots:!0,vertical:!1,autoplay:!0,interval:3e3,duration:1e3,main_title_Bg:null,banner_link:null,gifts_rcv:0,gifts_snd:0,note:"",username:null,token:null,carts:[],recommentList:[],activityList:[],minusStatuses:[],selectedAllStatus:!0,total:"",startX:0,itemLefts:[],showmorehidden:!0,rshowmorehidden:!0,all_rows:0,rall_rows:0,windowWidth:0,windowHeight:0,cartIds:null,amount:0,nickname:g.nickName,avatarUrl:g.avatarUrl,shop_type:o,navList2:d,buttonhidden:!0,qr_type:"",share_activity_qrcode_cache:"",loadingHidden:!1,act_id:"",act_title:"",main_footer_Bg:"",footer_link:"",page_type:"",order_no:"",coupons:"",receive:"",page:"",userInfo:""}},components:{},props:{},onLoad:function(e){var a=this,i=e.page_type?e.page_type:"",n=e.order_no?e.order_no:"",o=e.act_id?e.act_id:"",c=e.coupons?e.coupons:"",r=e.receive?e.receive:"";a.setData({act_id:o,page_type:i,order_no:n,coupons:c,receive:r}),console.log(t("activity page_type:",i," order_no:",n," receive:",r," act_id:",o," at pages\\activity\\activity.vue:169")),2==i&&1==r&&wx.navigateTo({url:"../order/receive/receive?order_no="+n+"&receive=1"}),a.get_activity_info()},onShow:function(){var t=this,e=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",a=wx.getStorageSync("username"),i=getCurrentPages();i.length>1&&t.setData({title_logo:"../../images/back.png"}),this.setData({username:a}),this.reloadData(a,e)},onShareAppMessage:function(){return{title:"送心礼物",desc:"开启礼物电商时代，200万人都在用的礼物小程序！",path:"/pages/hall/hall?refername="+l}},methods:{goBack:function(){var t=getCurrentPages();t.length>1?wx.navigateBack({changed:!0}):wx.switchTab({url:"../hall/hall"})},image_save:function(e,a){console.log(t("activity imge save image url:",e,"image_cache_name:",a," at pages\\activity\\activity.vue:260")),wx.downloadFile({url:e,success:function(e){if(200===e.statusCode)e.tempFilePath;else console.log(t("activity image_save 响应失败",e.statusCode," at pages\\activity\\activity.vue:267"))}})},bannerTapTag:function(e){var a=e.currentTarget.dataset.bannerlink,i=a.split("/");if(console.log(t("bannerTapTag:",i," at pages\\activity\\activity.vue:276")),"hall"==i[2]||"wish"==i[2]||"index"==i[2]||"my"==i[2]){for(var n=getCurrentPages(),o=n.length,c=0,r=0;r<o;r++)n[r].route.indexOf("hall/hall")>=0&&(c=1,r);1==c?wx.navigateBack({delta:o-r-1}):wx.switchTab({url:"/pages/hall/hall"})}else wx.navigateTo({url:a+"&username="+l+"&token="+u})},qrcodeTapTag:function(t){var e=this,a="activityshare",i=e.act_id,n=e.act_title?e.act_title:"送心活动",o=wx.getStorageSync("activity_qrcode_cache_"+i);e.setData({qr_type:a,share_activity_qrcode_cache:o}),wx.navigateTo({url:"../member/share/share?qr_type="+a+"&act_id="+i+"&act_title="+n+"&share_activity_qrcode_cache="+o})},showGoods:function(t){var e=t.currentTarget.dataset.objectId,a=wx.getStorageSync("username")?wx.getStorageSync("username"):"",n=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",o=t.currentTarget.dataset.goodsId,c=t.currentTarget.dataset.goodsName,r=t.currentTarget.dataset.goodsPrice,s=t.currentTarget.dataset.goodsInfo,l=t.currentTarget.dataset.sale,u=t.currentTarget.dataset.image,g={sku_id:e,id:o,goods_info:s,goods_price:r,sale:l,name:c,image:u,token:n,username:a};i.setStorageSync("show_goods_options",g),wx.navigateTo({url:"../details/details?sku_id="+e+"&id="+o+"&goods_info="+s+"&goods_price="+r+"&sale="+l+"&image="+u+"&token="+n+"&username="+a})},touchStart:function(t){var e=t.touches[0].clientX;this.setData({startX:e,itemLefts:[]})},touchMove:function(t){var e=t.currentTarget.dataset.index,a=t.touches[0].clientX,i=this.startX-a,n=this.itemLefts;n[e]=-i,this.setData({itemLefts:n})},touchEnd:function(t){var e=t.currentTarget.dataset.index,a=t.changedTouches[0].clientX,i=this.startX-a,n=60;i=i<=0?0:i>=n?n:i>=n/2?n:0;var o=this.itemLefts;o[e]=-i,this.setData({itemLefts:o})},reloadData:function(e,a){var i=this,n=(i.page,i.pagesize,i.shop_type,i.gifts_rcv,i.gifts_send,wx.getStorageSync("openid")?wx.getStorageSync("openid"):"");console.log(t("openid:"+n+" username:"+e," at pages\\activity\\activity.vue:413"))},onGotUserInfo:function(e){console.log(t(e.detail.errMsg," at pages\\activity\\activity.vue:426")),console.log(t(e.detail.userInfo," at pages\\activity\\activity.vue:427")),console.log(t(e.detail.rawData," at pages\\activity\\activity.vue:428"))},get_activity_info:function(){var e=this,a=(e.activityList,e.shop_type),i=e.act_id,o="activityshare";e.setData({loadingHidden:!1}),wx.request({url:n+"/api/client/get_activity_info",method:"POST",data:{type:1,shop_type:a,act_id:i},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(s){var u=s.data.result;if(u){e.setData({activityList:u,act_id:u["act_id"],act_title:u["act_title"],main_title_Bg:u["activity_banner_url"],banner_link:u["activity_banner_link"],main_footer_Bg:u["activity_footer_url"],footer_link:u["activity_footer_link"],buttonhidden:!1}),e.setData({loadingHidden:!0}),console.log(t("get_activity_info:",u,"banner_link",e.banner_link," at pages\\activity\\activity.vue:484"));var g=n+"/api/WXPay/getQRCode?username="+l+"&appid="+c+"&secret="+r+"&shop_type="+a+"&qr_type="+o+"&act_id="+u["act_id"];e.image_save(g,"activity_qrcode_cache_"+i)}}})},bindDownLoad:function(){var e=this;e.setData({page:s++}),console.log(t("lower"," at pages\\activity\\activity.vue:498"))},scroll:function(t){this.setData({scrollTop:t.detail.scrollTop})},topLoad:function(e){this.setData({scrollTop:0}),console.log(t("lower"," at pages\\activity\\activity.vue:514"))},setData:function(t){var e,a,i=this,n=[];Object.keys(t).forEach(function(o){n=o.split("."),e=t[o],a=i.$data,n.forEach(function(t,o){o+1==n.length?i.$set(a,t,e):a[t]||i.$set(a,t,{}),a=a[t]})})}}};e.default=_}).call(this,a("0de9")["default"],a("6e42")["default"])},8620:function(t,e,a){"use strict";a.r(e);var i=a("c057"),n=a("00fe");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("9b87");var c=a("2877"),r=Object(c["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},"8cbd":function(t,e,a){"use strict";(function(t){a("ee7a"),a("921b");i(a("66fd"));var e=i(a("8620"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"90a8":function(t,e,a){},"9b87":function(t,e,a){"use strict";var i=a("90a8"),n=a.n(i);n.a},c057:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})}},[["8cbd","common/runtime","common/vendor"]]]);