(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/list/list"],{"0bca":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=getApp().globalData.weburl,s={data:function(){return{username:null,token:null,addressIndex:null,addressObjects:"",is_buymyself:0,is_activity:0}},components:{},props:{},onLoad:function(t){var a=this;a.is_buymyself=t.is_buymyself?t.is_buymyself:0,a.is_activity=t.is_activity?t.is_activity:0,console.log(e("address list onload options:",t," at pages\\address\\list\\list.vue:53"))},onShow:function(){var e=this,t=wx.getStorageSync("username")?wx.getStorageSync("username"):"",a=wx.getStorageSync("token")?wx.getStorageSync("token"):"1";e.setData({username:t,token:a}),t?this.loadData(t,a):wx.navigateTo({url:"../../login/login?goods_id="+this.goodsid+"&is_permission=1"})},methods:{add:function(){var e=this.is_buymyself,t=this.is_activity;wx.navigateTo({url:"../add/add?is_buymyself="+e+"&is_activity="+t})},setDefault:function(t){for(var s=this,n=s.username,i=s.token,o=parseInt(t.currentTarget.dataset.index),r=s.addressObjects,d=0;d<r.length;d++)r[d]["is_default"]=d==o?1:0;s.setData({addressObjects:r}),wx.request({url:a+"/api/client/update_member_address",method:"POST",data:{username:n,id:r[o]["id"],access_token:i,full_name:r[o]["full_name"],prov:r[o]["prov"],city:r[o]["city"],area:r[o]["area"],town:r[o]["town"],address:r[o]["address"],tel:r[o]["tel"],is_default:r[o]["is_default"]},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(t){console.log(e(t.data.result," at pages\\address\\list\\list.vue:125")),wx.showToast({title:"设置成功",icon:"success",duration:2e3})}})},edit:function(e){var t=parseInt(e.currentTarget.dataset.index),a=this.addressObjects[t]["id"];wx.navigateTo({url:"../add/add?objectId="+a})},deleteFun:function(t){var s=this,n=s.username,i=s.token,o=parseInt(t.currentTarget.dataset.index),r=s.addressObjects[o];wx.showModal({title:"确认",content:"要删除这个地址吗？",success:function(t){t.confirm&&wx.request({url:a+"/api/client/delete_member_address",method:"POST",data:{username:n,address_id:r["id"],access_token:i},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(t){console.log(e(t.data.result," at pages\\address\\list\\list.vue:174"));for(var a=s.addressObjects,n=[],i=0,r=0;r<a.length;r++)r!=o&&(n[i++]=a[r]);s.setData({addressObjects:n}),wx.showToast({title:"删除成功",icon:"success",duration:2e3})}})}})},loadData:function(e,t){var s=this;wx.request({url:a+"/api/client/get_member_address",method:"POST",data:{username:e,token:t},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){for(var t=e.data.result,a=0;a<t.length;a++)1==t[a]["is_default"]&&s.setData({addressIndex:a});s.setData({addressObjects:t})}})},setData:function(e){var t,a,s=this,n=[];Object.keys(e).forEach(function(i){n=i.split("."),t=e[i],a=s.$data,n.forEach(function(e,i){i+1==n.length?s.$set(a,e,t):a[e]||s.$set(a,e,{}),a=a[e]})})}}};t.default=s}).call(this,a("0de9")["default"])},"0e2b":function(e,t,a){"use strict";var s=a("6084"),n=a.n(s);n.a},6084:function(e,t,a){},"620b":function(e,t,a){"use strict";a.r(t);var s=a("9120"),n=a("eb41");for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a("0e2b");var o=a("2877"),r=Object(o["a"])(n["default"],s["a"],s["b"],!1,null,null,null);t["default"]=r.exports},9120:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},n=[];a.d(t,"a",function(){return s}),a.d(t,"b",function(){return n})},e218:function(e,t,a){"use strict";(function(e){a("ee7a"),a("921b");s(a("66fd"));var t=s(a("620b"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},eb41:function(e,t,a){"use strict";a.r(t);var s=a("0bca"),n=a.n(s);for(var i in s)"default"!==i&&function(e){a.d(t,e,function(){return s[e]})}(i);t["default"]=n.a}},[["e218","common/runtime","common/vendor"]]]);