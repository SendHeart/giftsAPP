(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/list/list"],{"162d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},s=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s})},"1eb4":function(e,t,a){"use strict";a.r(t);var n=a("162d"),s=a("a327");for(var o in s)"default"!==o&&function(e){a.d(t,e,function(){return s[e]})}(o);a("acc5");var i=a("2877"),l=Object(i["a"])(s["default"],n["a"],n["b"],!1,null,null,null);t["default"]=l.exports},"2bf6":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a("3936");var n=function(){return a.e("pages/list/mescroll-swiper-item").then(a.bind(null,"958a"))},s=getApp().globalData.weburl,o=getApp().globalData.shop_type,i=[{id:"is_recommend",title:"推荐",value:"1"}],l=[{id:"default",title:"最新"},{id:"hot",title:"人气"},{id:"price",title:"价格"}],r={data:function(){return{title_name:"商城首页",title_logo:"/static/images/footer-icon-05.png",img_discount:"/static/images/discount.png",default_img:s+"/uploads/default_goods_image.png",activeIndex:0,activeIndex2:0,navList:i,navList2:l,images:[],all_rows:0,venuesItems_show:[],venuesItems:[],venuesList:[],show_max:1,search_goodsname:null,keyword:"",page:1,pagesize:20,pageoffset:0,indicatorDots:!0,vertical:!1,autoplay:!0,interval:3e3,duration:100,loadingHidden:!0,is_goodslist_loading:!1,msgList:[],hidden:!0,scrollTop:0,scrollHeight:0,old:{scrollTop:0},tab:"is_recommend",tab_value:"1",tab2:"default",updown:0,shop_type:o,scrollLeft:0,toView:0,hiddenallclassify:!1,animationData:"",floorstatus:!1,loading_note:"",username:"",token:"",navlist_toView:"",navlist_title:"",userInfo:"",platform:"",windowHeight:"",windowWidth:"",dkheight:"",index:"",status:"more",contentText:{contentdown:"上拉加载更多",contentrefresh:"加载中",contentnomore:"没有更多"}}},components:{MescrollItem:n},props:{},watch:{},mounted:function(){},onLoad:function(e){var t=this,a=e.username?e.username:wx.getStorageSync("username"),n=e.token?e.token:wx.getStorageSync("token"),s=e.navlist?e.navlist:0,o=e.navlist_title?e.navlist_title:"";t.setData({username:a,token:n,navlist_toView:s,navlist_title:o}),wx.getSystemInfo({success:function(e){t.setData({platform:e.platform,windowHeight:e.windowHeight,windowWidth:e.windowWidth,dkheight:e.windowHeight-60})}}),t.get_menubar()},onShow:function(){var e=this,t=getCurrentPages();t.length>1&&e.setData({title_logo:"/static/images/back.png"})},methods:{showGoods:function(e){var t=e.id,a=wx.getStorageSync("username")?wx.getStorageSync("username"):"",n=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",s=e.goods_id?e.goods_id:e.id,o=e.goods_org,i=e.shape,l=e.name,r=e.sell_price,d=e.atc_info,c=e.sale,u=e.image?e.image:"",g=e.activity_image?e.activity_image:"";u=u||(g||""),getApp().globalData.hall_gotop=0,wx.navigateTo({url:"/pages/details/details?sku_id="+t+"&id="+s+"&goods_shape="+i+"&goods_org="+o+"&goods_info="+d+"&goods_price="+r+"&sale="+c+"&name="+l+"&image="+u+"&token="+n+"&username="+a})},load:function(){var t=this;e.createSelectorQuery().selectAll(".lazy").boundingClientRect(function(e){e.forEach(function(e,a){e.top<=t.windowHeight&&(t.venuesItems[e.dataset.index].show=!0)})}).exec()},imageLoad:function(e){this.venuesItems[e.target.dataset.index].loaded=!0},getleft:function(e){var t=this,a=t.scrollLeft;t.scrollLeft=a+10},openAllTapTag:function(e){var t=this,a=t.hiddenallclassify;t.hiddenallclassify=!a},goBack:function(){var e=getCurrentPages();e.length>1?wx.navigateBack({changed:!0}):wx.switchTab({url:"../hall/hall"})},swiperChange:function(e){this.changeTab(e.detail.current)},changeTab:function(e){var t=this,a=t.navList,n=e,s=n;t.activeIndex=e,s=n>2&&n<a.length?n-2:0,t.toView=s||0,t.tab=a[t.activeIndex].id,t.tab_value=a[t.activeIndex].value},onTapTag:function(e){var t=this,a=e.currentTarget.dataset.id,n=e.currentTarget.dataset.value,s=e.currentTarget.dataset.index,o=e.currentTarget.dataset.title,i=t.navList,l=s,r=t.hiddenallclassify;l=s>2&&s<i.length?s-2:0,"search_goodsname"!=a&&(o=""),t.setData({activeIndex:parseInt(s),tab:a,tab_value:n,page:1,search_goodsname:o,toView:l||0,pageoffset:0,hiddenallclassify:!r}),t.get_goods_list(),0==r&&t.openAllTapTag()},onTapTag2:function(e){var t=this,a=(e.currentTarget.id,e.currentTarget.dataset.tabid),n=e.currentTarget.dataset.index,s=1==t.updown?0:1,o=t.activeIndex;t.activeIndex2=parseInt(n),t.tab2=a,t.page=1,t.updown=parseInt(s),t.venuesList[o].venuesItems=[],t.get_goods_list()},scrolltoupper:function(e){var t=this,a=e.detail.scrollTop;a>100?(this.setData({floorstatus:!0}),t.platform):this.setData({floorstatus:!1})},scroll:function(e){var t=this,a=t.activeIndex,n=t.venuesList[a].scrollTop,s=e.detail.scrollTop;t.venuesList[a].scrollTop=s,s>n+60&&t.getMoreGoodsTapTag()},goTop:function(e){var t=this,a=t.activeIndex;t.page=1,t.pageoffset=t.venuesList[a].pageoffset,t.venuesList[a].scrollTop=0,t.venuesList[a].venuesItems=[],t.get_goods_list(),t.$nextTick(function(){t.venuesList[a].scrollTop=0})},getMoreGoodsTapTag:function(){var e=this,t=e.activeIndex,a=e.venuesList[t].page+1,n=e.venuesList[t].all_rows,s=e.is_goodslist_loading;s||(a>n?e.status="nomore":(e.venuesList[t].page=a,e.get_goods_list()))},search_goodsnameTapTag:function(e){var t=this,a=e.detail.value;t.setData({keyword:a})},get_goods_list:function(e){var t=this,a=t.page,n=t.pagesize,o=t.pageoffset,i=t.username,l=t.token,r=t.activeIndex,d=t.tab,c=t.tab_value,u=t.tab2,g=t.updown,f=t.search_goodsname,p=t.keyword,v=t.shop_type;t.setData({is_goodslist_loading:!0,loadingHidden:!1}),t.status="loading",wx.request({url:s+"/api/client/get_goods_list",method:"POST",data:{goods_type:d,goods_type_value:c,username:i,access_token:l,page:a,pagesize:n,pageoffset:o,search_goodsname:f,goods_sales:u,updown:g,keyword:p,shop_type:v,query_type:"APP"},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){var s=e.data.result,o=e.data.all_rows,i=e.data.pageoffset;if(!s)return t.setData({is_goodslist_loading:!1,keyword:""}),void(t.status="nomore");var l=t.venuesList[r].venuesItems;if(s){for(var d=0;d<s.length;d++)s[d]["short_name"]=s[d]["name"].substring(0,10)+"...",s[d]["act_info"]||(s[d]["act_info"]=""),s[d]["goods_tag"]?s[d]["goods_tag"]=s[d]["goods_tag"].substring(0,10):s[d]["goods_tag"]="",s[d]["image"]=s[d]["activity_image"]?s[d]["activity_image"]:s[d]["image"],s[d]["show"]=1==a,s[d]["loaded"]=1==a;l=t.venuesItems.concat(s),t.venuesList[r].venuesItems=t.venuesList[r].venuesItems.concat(l),t.venuesList[r].page=a,t.venuesList[r].pagesize=n,t.venuesList[r].all_rows=o,t.venuesList[r].pageoffset=i,setTimeout(function(){t.is_goodslist_loading=!1},500)}}})},get_menubar:function(e){var t=this,a=t.navlist_toView,n=t.navlist_title;wx.request({url:s+"/api/client/get_menubar",method:"POST",data:{menu_type:1,query_type:"APP"},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){var s=e.data.result;if(s){for(var o=0;o<s.length;o++)if(s[o]["title"].indexOf(n)>=0){a=o;break}t.navList=s,t.index=a,t.activeIndex=a,t.tab=s[a]["id"],t.tab_value=s[a]["value"],t.venuesItems_show=[],t.navList.forEach(function(e){t.venuesList.push({venuesItems:[],refreshing:!1,refreshFlag:!1,refreshText:"",isLoading:!1,loadingText:"加载中...",isNoData:!1,pulling:!1,page:0,pagesize:t.pagesize,all_rows:t.all_rows,scrollTop:t.scrollTop,angle:0})}),t.get_goods_list()}else wx.showToast({title:"没有菜单项",icon:"loading",duration:1500})}})},setData:function(e){var t,a,n=this,s=[];Object.keys(e).forEach(function(o){s=o.split("."),t=e[o],a=n.$data,s.forEach(function(e,o){o+1==s.length?n.$set(a,e,t):a[e]||n.$set(a,e,{}),a=a[e]})})}}};t.default=r}).call(this,a("6e42")["default"])},"8cb0":function(e,t,a){},a327:function(e,t,a){"use strict";a.r(t);var n=a("2bf6"),s=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);t["default"]=s.a},acc5:function(e,t,a){"use strict";var n=a("8cb0"),s=a.n(n);s.a},bbc1:function(e,t,a){"use strict";(function(e){a("ee7a"),a("921b");n(a("66fd"));var t=n(a("1eb4"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])}},[["bbc1","common/runtime","common/vendor"]]]);