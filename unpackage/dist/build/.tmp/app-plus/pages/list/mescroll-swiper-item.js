(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/list/mescroll-swiper-item"],{"212c":function(e,t,o){"use strict";o.r(t);var s=o("8b6f"),n=o.n(s);for(var l in s)"default"!==l&&function(e){o.d(t,e,function(){return s[e]})}(l);t["default"]=n.a},7585:function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},n=[];o.d(t,"a",function(){return s}),o.d(t,"b",function(){return n})},"8b6f":function(e,t,o){"use strict";(function(e,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return Promise.all([o.e("common/vendor"),o.e("components/mescroll-uni/mescroll-uni")]).then(o.bind(null,"893f"))},l=function(){return o.e("pages/list/pd-list").then(o.bind(null,"9eef"))},a=getApp().globalData.weburl,i=getApp().globalData.shop_type,r={components:{MescrollUni:n,PdList:l},data:function(){return{all_rows:0,venuesItems:[],venuesList:[],search_goodsname:null,page:1,pagesize:20,pageoffset:0,is_goodslist_loading:!1,old:{scrollTop:0},current_scrollTop:0,mescroll:null,downOption:{auto:!1,use:!1,isLock:!0},upOption:{auto:!1,onScroll:!0,page:{num:0,size:20},noMoreSize:4,empty:{tip:"~ 空空如也 ~",btnText:"去看看"}},pdList:[],isInit:!1,scrollY:0}},props:{i:Number,activeIndex:{type:Number,default:function(){return 0}},tab_value:{type:String,default:function(){return"1"}},tab:{type:String,default:function(){return"is_recommend"}},tab2:{type:String,default:function(){return"default"}},updown:{type:Number,default:function(){return 0}}},watch:{activeIndex:function(e){this.i!==e||this.isInit||(this.isInit=!0,this.mescroll.triggerDownScroll(),this.mescroll.scrollTo(0,0))},updown:function(e){this.i===this.activeIndex&&(this.page=1,this.mescroll.resetUpScroll(),this.mescroll.scrollTo(0,0))}},mounted:function(){0===this.i&&(this.isInit=!0,this.mescroll.triggerDownScroll())},methods:{scroll:function(e){var t=this,o=(t.old.scrollTop,t.mescroll.scrollTop);t.old.scrollTop=o},goTop:function(){var e=this;wx.getStorageSync("navList2")&&wx.getStorageSync("navList2");e.pdList=[],e.page=1,e.pageoffset=0,e.mescroll.resetUpScroll(),e.$nextTick(function(){e.mescroll.scrollTo(0,0)}),e.mescroll.scrollTop=e.old.scrollTop},mescrollInit:function(e){this.mescroll=e},downCallback:function(e){this.page=1,e.resetUpScroll()},upCallback:function(t){var o=this;this.getListDataFromNet(t.num,t.size,function(s){console.log(e("i="+o.i+", mescroll.num="+t.num+", mescroll.size="+t.size+", curPageData.length="+s.length," at pages\\list\\mescroll-swiper-item.vue:160")),t.endSuccess(s.length),1!=t.num&&1!=o.page||(o.pdList=[]),"n"==s?t.endByPage(o.page,o.all_rows):o.pdList=o.pdList.concat(s)},function(){t.endErr()})},emptyClick:function(){s.showToast({title:"点击了按钮,具体逻辑自行实现"})},getListDataFromNet:function(t,o,n,l){var r=this,c=r.page,u=r.pagesize,d=r.pageoffset,p=r.all_rows,g=s.getStorageSync("username"),f=s.getStorageSync("token"),m=r.activeIndex,_=r.tab,h=r.tab_value,v=r.tab2,w=r.updown,b=r.search_goodsname?r.search_goodsname:"",y=r.keyword?r.keyword:"";if(console.log(e("activeIndex:",m,"goods_type:",r.tab," goods_type_value:",r.tab_value," goods_sales:",r.tab2," updown:",r.updown," at pages\\list\\mescroll-swiper-item.vue:202")),c>p&&c>1)return console.log(e("加载完成 page:",c,"all_rows:",p," goods_type_value:",r.tab_value," goods_sales:",r.tab2," updown:",r.updown," at pages\\list\\mescroll-swiper-item.vue:204")),r.is_goodslist_loading=!1,void(n&&n("n"));r.is_goodslist_loading=!0,r.status="loading";try{wx.request({url:a+"/api/client/get_goods_list",method:"POST",data:{goods_type:_,goods_type_value:h,username:g,access_token:f,page:c,pagesize:u,pageoffset:d,search_goodsname:b,goods_sales:v,updown:w,keyword:y,shop_type:i},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(e){var t=e.data.result,o=e.data.all_rows,s=e.data.pageoffset;if(!t)return r.is_goodslist_loading=!1,void(n&&n(e.data.status));if(t){for(var l=0;l<t.length;l++)t[l]["short_name"]=t[l]["name"].substring(0,10)+"...",t[l]["act_info"]||(t[l]["act_info"]=""),t[l]["goods_tag"]?t[l]["goods_tag"]=t[l]["goods_tag"].substring(0,10):t[l]["goods_tag"]="",t[l]["image"]=t[l]["activity_image"]?t[l]["activity_image"]:t[l]["image"];r.page=c+1,r.pageoffset=s,r.all_rows=o,n&&n(t)}}})}catch(S){l&&l()}}}};t.default=r}).call(this,o("0de9")["default"],o("6e42")["default"])},"958a":function(e,t,o){"use strict";o.r(t);var s=o("7585"),n=o("212c");for(var l in n)"default"!==l&&function(e){o.d(t,e,function(){return n[e]})}(l);var a=o("2877"),i=Object(a["a"])(n["default"],s["a"],s["b"],!1,null,null,null);t["default"]=i.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/list/mescroll-swiper-item-create-component',
    {
        'pages/list/mescroll-swiper-item-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("958a"))
        })
    },
    [['pages/list/mescroll-swiper-item-create-component']]
]);
