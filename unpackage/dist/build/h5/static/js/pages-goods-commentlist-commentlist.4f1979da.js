(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-commentlist-commentlist"],{1490:function(e,t,i){"use strict";var a=i("7d9f"),n=i.n(a);n.a},"181e":function(e,t,i){"use strict";var a=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("28a5");var n=a(i("a4bb"));i("ac6a");i("3936");var o=getApp().globalData.weburl,r=getApp().globalData.shop_type,l=getApp().globalData.uploadurl,s={data:function(){return{shop_type:r,uploadurl:l,user:null,userInfo:{},username:null,indicatorDots:!1,vertical:!1,autoplay:!0,page:1,pagesize:10,all_rows:0,page_num:0,interval:3e4,duration:12e3,goodsname:"",goodsinfo:[],goodsprice:0,goodssale:0,goodsid:0,sku_id:0,commodityAttr:[],attrValueList:[],hideviewgoodsinfo:!0,dkheight:300,scrollTop:0,scrollTop_init:350,comment:"",comm_list:[],img_arr:[],new_img_arr:[],upimg_url:[],formdata:"",star:[],goods_id:"",goods_skuid:"",order_skuid:""}},components:{},props:{},onLoad:function(e){var t=this,i=e.goods_id,a=e.goods_skuid?e.goods_skuid:0,n=e.order_skuid?e.order_skuid:0;t.setData({goods_id:i,goods_skuid:a,order_skuid:n}),t.get_order_comment()},methods:{imgYu:function(e){var t=e.currentTarget.dataset.src,i=e.currentTarget.dataset.list;wx.previewImage({current:t,urls:i})},get_order_comment:function(){var e=this,t=wx.getStorageSync("username")?wx.getStorageSync("username"):"",i=wx.getStorageSync("m_id")?wx.getStorageSync("m_id"):"",a=wx.getStorageSync("token")?wx.getStorageSync("token"):"1",n=e.page,r=e.pagesize,l=e.goods_id,s=1,c=(n=e.page,r=e.pagesize,e.shop_type);e.img_arr;l>0&&wx.request({url:o+"/api/client/get_order_comment",method:"POST",data:{username:t,access_token:a,goods_id:l,query_type:s,m_id:i,page:n,pagesize:r,shop_type:c},header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(t){var i=t.data.result,a=(t.data.info,t.data.all_rows?t.data.all_rows:1);if(i){var n=e.page_num;n=a/r+.5,e.setData({comm_list:e.comm_list.concat(i),all_rows:a,page_num:n.toFixed(0)});for(var o=0;o<i.length;o++){var l=[];i[o]["img1"]&&l.push(i[o]["img1"]),i[o]["img2"]&&l.push(i[o]["img2"]),i[o]["img3"]&&l.push(i[o]["img3"]),i[o]["img_arr"]=l}e.setData({comm_list:i}),console.log("获取商品评论信息:",i,"all_rows:",a)}else wx.showToast({title:"暂无评论信息",icon:"loading",duration:1e3})}})},getMoreCommentTapTag:function(e){var t=this,i=t.page+1;t.pagesize,t.all_rows;i>t.page_num?wx.showToast({title:"没有更多了",icon:"loading",duration:1e3}):(t.setData({page:i}),t.get_order_comment())},goBack:function(){var e=getCurrentPages();e.length>1?wx.navigateBack({changed:!0}):wx.switchTab({url:"../../hall/hall"})},showCartToast:function(){wx.showToast({title:"已加入购物车",icon:"success",duration:1e3})},setData:function(e){var t,i,a=this,o=[];(0,n.default)(e).forEach(function(n){o=n.split("."),t=e[n],i=a.$data,o.forEach(function(e,n){n+1==o.length?a.$set(i,e,t):i[e]||a.$set(i,e,{}),i=i[e]})})}}};t.default=s},3936:function(e,t,i){"use strict";var a=i("288e");i("3b2b");var n=a(i("768b")),o=a(i("795b"));i("28a5"),i("a481");var r=a(i("e814"));function l(e){var t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),n=e.getHours(),o=e.getMinutes(),r=e.getSeconds();return[t,i,a].map(c).join("-")+" "+[n,o,r].map(c).join(":")}function s(e,t){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i=e?new Date(e):new Date,i.setDate(i.getDate()+t);var n=i.getFullYear(),o=i.getMonth()+1,r=i.getDate(),l=i.getHours(),s=i.getMinutes(),c=i.getSeconds();return o<10&&(o="0"+o),r<10&&(r="0"+r),l<10&&(l="0"+l),s<10&&(s="0"+s),c<10&&(c="0"+c),0==a?n+"-"+o+"-"+r:1==a?l+":"+s:2==a?l+":"+s+":"+c:n+"-"+o+"-"+r}function c(e){return e=e.toString(),e[1]?e:"0"+e}function u(e){var t,i=6e4,a=60*i,n=24*a,o=30*n,l=365*n,s=(new Date).getTime(),c=s-e;if(c<0)return"数据出错";var u=c/l,d=c/o,f=c/(7*n),g=c/n,m=c/a,p=c/i;return t=u>=1?(0,r.default)(u)+"年以前":d>=1?(0,r.default)(d)+"个月前":f>=1?(0,r.default)(f)+"星期前":g>=1?(0,r.default)(g)+"天前":m>=1?(0,r.default)(m)+"小时前":p>=5?(0,r.default)(p)+"分钟前":"刚刚发表",t}function d(e){if("string"==typeof e)return e=e.replace(/\ +/g,""),e=e.replace(/[\r\n]/g,""),e;console.log("去除回车换行空格失败！参数不是字符串类型")}function f(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=new Date(e.replace(/-/g,"/")),n=new Date(t.replace(/-/g,"/")),o=n.getTime()-a.getTime(),l=(0,r.default)(o/864e5);return 0==i?o:1==i?l:void 0}function g(e){var t=e.replace(/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/gi,"");return t}function m(e,t){e=e.split("."),t=t.split(".");var i=Math.max(e.length,t.length);while(e.length<i)e.push("0");while(t.length<i)t.push("0");for(var a=0;a<i;a++){var n=(0,r.default)(e[a]),o=(0,r.default)(t[a]);if(n>o)return 1;if(n<o)return-1}return 0}function p(e){var t="tmp_base64src";return new o.default(function(i,a){if(wx.getFileSystemManager){var o=wx.getFileSystemManager(),r=/data:image\/(\w+);base64,(.*)/.exec(e)||[],l=(0,n.default)(r,3),s=l[1],c=l[2];s||a(new Error("ERROR_BASE64SRC_PARSE"));var u="".concat(wx.env.USER_DATA_PATH,"/").concat(t,".").concat(s),d=wx.base64ToArrayBuffer(c);o.writeFile({filePath:u,data:d,encoding:"binary",success:function(){i(u)},fail:function(){a(new Error("ERROR_BASE64SRC_WRITE"))}})}else a(new Error("微信版本过低"))})}function w(){var e="ios";try{var t=wx.getSystemInfoSync();e=t.platform}catch(i){}return e}function v(e,t){return Math.round(e/(e+t)*1e4)/100+"%"}function b(e){return RegExp(/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/).test(e)}function x(e){return RegExp(/^1[34578]\d{9}$/).test(e)}i("6b54"),i("87b3"),e.exports={formatTime:l,getDateDiff:u,getDateStr:s,formatString:d,calDateDiff:f,compareVersion:m,filterEmoji:g,checkPhoneNumber:x,base64src:p,getPlatform:w,percentage:v,checkEmail:b}},"768b":function(e,t,i){"use strict";i.r(t);var a=i("a745"),n=i.n(a);function o(e){if(n()(e))return e}var r=i("5d73"),l=i.n(r);function s(e,t){var i=[],a=!0,n=!1,o=void 0;try{for(var r,s=l()(e);!(a=(r=s.next()).done);a=!0)if(i.push(r.value),t&&i.length===t)break}catch(c){n=!0,o=c}finally{try{a||null==s["return"]||s["return"]()}finally{if(n)throw o}}return i}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){return o(e)||s(e,t)||c()}i.d(t,"default",function(){return u})},"7d9f":function(e,t,i){var a=i("9622");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("2d8b58af",a,!0,{sourceMap:!1,shadowMode:!1})},9164:function(e,t,i){"use strict";i.r(t);var a=i("c57d"),n=i("ad15");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("1490");var r=i("2877"),l=Object(r["a"])(n["default"],a["a"],a["b"],!1,null,"741437f5",null);t["default"]=l.exports},9622:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".container[data-v-741437f5]{background:#fff;width:100%}\r\n\r\n\r\n/* 显示与隐藏 */.show[data-v-741437f5]{display:block}.hidden[data-v-741437f5]{display:none}.comm-text[data-v-741437f5]{margin-left:%?20?%;margin-right:%?20?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;font-size:%?24?%;color:#999;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background-color:#fff}.comm-item[data-v-741437f5]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;border-bottom:%?1?% solid #eee;padding:%?10?%;text-align:left;-webkit-box-align:left;-webkit-align-items:left;-ms-flex-align:left;align-items:left;background-color:#fff}.comm-title[data-v-741437f5]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;padding:0;text-align:left;-webkit-box-align:left;-webkit-align-items:left;-ms-flex-align:left;align-items:left}.comm-sub-title[data-v-741437f5]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:%?10?%;text-align:left;-webkit-box-align:left;-webkit-align-items:left;-ms-flex-align:left;align-items:left;font-size:%?28?%}.star-level[data-v-741437f5]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding:%?8?% 0;text-align:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.star-level uni-image[data-v-741437f5]{width:%?30?%;height:%?30?%;padding:%?0?%}.comm-image[data-v-741437f5]{margin:%?15?%;width:%?80?%;height:%?80?%;border-radius:50%}.comm-content-text[data-v-741437f5]{margin-left:%?118?%;margin-right:%?20?%;font-size:%?28?%;color:#666;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:wrap}.comm-content-image[data-v-741437f5]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;padding:%?10?% 0;text-align:left;-webkit-box-align:left;-webkit-align-items:left;-ms-flex-align:left;align-items:left;background-color:#fff}.comm-content-image uni-image[data-v-741437f5]{\r\n /*被图片设置宽高*/width:%?150?%;height:%?150?%;margin-left:%?100?%;margin-right:%?20?%}.morebtn[data-v-741437f5]{margin:%?20?%;border:0;background:#f2f2f2;color:#444;font-size:%?28?%}",""])},ad15:function(e,t,i){"use strict";i.r(t);var a=i("181e"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=n.a},c57d:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"container"},e._l(e.comm_list,function(t,a){return i("v-uni-view",{key:a,staticClass:"comm-item"},[i("v-uni-view",{staticClass:"comm-title"},[i("v-uni-image",{staticClass:"comm-image",attrs:{src:t.wx_headimg,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"comm-sub-title"},[i("v-uni-text",[e._v(e._s(t.wx_nickname))]),i("v-uni-view",{staticClass:"star-level"},[i("v-uni-image",{attrs:{src:t.level>0?"/static/images/star_on.png":"/static/images/star.png"}}),i("v-uni-image",{attrs:{src:t.level>1?"/static/images/star_on.png":"/static/images/star.png"}}),i("v-uni-image",{attrs:{src:t.level>2?"/static/images/star_on.png":"/static/images/star.png"}}),i("v-uni-image",{attrs:{src:t.level>3?"/static/images/star_on.png":"/static/images/star.png"}}),i("v-uni-image",{attrs:{src:t.level>4?"/static/images/star_on.png":"/static/images/star.png"}})],1)],1)],1),i("v-uni-view",[i("v-uni-view",{staticClass:"comm-content-text"},[e._v(e._s(t.desc))])],1),i("v-uni-view",{staticClass:"comm-content-image"},e._l(t.img_arr,function(a,n){return i("v-uni-image",{key:n,attrs:{"data-list":t.img_arr,"data-src":a,src:a,mode:"aspectFit"},on:{click:function(t){t=e.$handleEvent(t),e.imgYu(t)}}})}),1)],1)}),1),e.page_num>1?i("v-uni-button",{staticClass:"morebtn",attrs:{type:"default",size:"default","hover-class":"none"},on:{click:function(t){t=e.$handleEvent(t),e.getMoreCommentTapTag(t)}}},[e._v("更多 "+e._s(e.page)+"/"+e._s(e.page_num))]):e._e()],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})}}]);