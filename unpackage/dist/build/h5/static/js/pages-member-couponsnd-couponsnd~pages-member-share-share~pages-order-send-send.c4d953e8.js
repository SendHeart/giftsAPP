(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-couponsnd-couponsnd~pages-member-share-share~pages-order-send-send"],{"0d30":function(t,e,a){"use strict";a.r(e);var i=a("dd53"),n=a("4698");for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);a("f379");var o=a("2877"),s=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"39fb3c39",null);e["default"]=s.exports},"2d32":function(t,e,a){"use strict";var i=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("28a5");var n=i(a("a4bb"));a("ac6a"),a("3b2b");var r=i(a("795b"));a("4917");var o=i(a("e814"));a("6c7b");var s=i(a("cebc")),c=i(a("f499")),d={data:function(){return{showCanvas:!1,width:100,height:100,index:0,imageList:[],tempFileList:[],isPainting:!1,cache:{},ctx:null,windowHeight:"",windowWidth:"",ratio:"",background:""}},components:{},props:{painting:{type:Object,value:{views:[]}}},watch:{painting:function(t,e){wx.removeStorageSync("canvasdrawer_pic_cache"),this.cache=wx.getStorageSync("canvasdrawer_pic_cache")||{},this.ctx=wx.createCanvasContext("canvasdrawer",this),this.isPainting||((0,c.default)(t)!==(0,c.default)(e)?t&&t.width&&t.height&&(this.setData({showCanvas:!0,isPainting:!0}),this.readyPigment()):(this.setData({showCanvas:!0,isPainting:!0}),this.readyPigment(),t&&"same"!==t.mode&&this.$emit("getImage",{errMsg:"canvasdrawer:samme params"})))}},mounted:function(){},methods:{readyPigment:function(){var t=this,e=this.painting,a=e.width,i=e.height,n=e.windowHeight,r=e.windowWidth,o=e.background;e.views;this.setData({width:a,height:i,windowHeight:n,windowWidth:r,ratio:750/r,background:o}),console.log("canvasdrawer readyPigment background:",o,a,i);var s=setInterval(function(){t.ctx&&(clearInterval(s),t.ctx.clearActions(),t.ctx.save(),t.drawRect({background:o,top:0,left:0,width:a,height:i}),t.startPainting())},200)},getImageList:function(t){for(var e=[],a=0;a<t.length;a++)"image"===t[a].type&&e.push(t[a].url);this.setData({imageList:e}),this.downLoadImages(0)},downLoadImages:function(t){var e=this,a=this.imageList,i=this.tempFileList;t<a.length?this.getImageInfo(a[t]).then(function(a){i.push(a),e.setData({tempFileList:i}),e.downLoadImages(t+1),console.log("canvasdrawer downLoadImages index:",t," tempFileList:",e.tempFileList)}).catch(function(e){console.log("canvasdrawer downLoadImages fail:",a[t],"index:",t)}):this.startPainting()},startPainting:function(){var t=this,e=this.painting,a=e.width,i=e.height,n=e.views;e.background,e.radius;this.width=a,this.height=i;for(var r=0;r<n.length;r++)if(console.log("canvasdrawer onload views.length:",n.length," i:",r),"image"===n[r].type){var o=n[r],c={};c=(0,s.default)({},o),console.log("canvasdrawer onload image drawData:",c," i:",r),this.drawImage(c)}else"text"===n[r].type?this.drawText(n[r]):"rect"===n[r].type?this.drawRect(n[r]):"round"===n[r].type&&this.drawRound(n[r]);this.ctx.draw(!1,function(){console.log("canvasdrawer this.ctx.draw canvasdrawer_pic_cache:",t.cache),wx.removeStorageSync("canvasdrawer_pic_cache"),wx.setStorageSync("canvasdrawer_pic_cache",t.cache),t.saveImageToLocal()})},drawImage:function(t){this.ctx.save();var e=t.url,a=t.top,i=void 0===a?0:a,n=t.left,r=void 0===n?0:n,o=t.width,s=void 0===o?0:o,c=t.height,d=void 0===c?0:c,h=t.borderRadius,u=void 0===h?0:h,l=t.roundedRect,g=void 0===l?0:l;if(u)this.ctx.beginPath(),this.ctx.arc(r+u,i+u,u,0,2*Math.PI),this.ctx.fill(),this.ctx.clip(),this.ctx.drawImage(e,r,i,s,d),console.log("canvasdrawer drwImge borderRadius:",u);else if(g){var f=g;s<2*f&&(f=s/2),d<2*f&&(f=d/2),this.ctx.beginPath(),this.ctx.moveTo(r+f,i),this.ctx.arcTo(r+s,i,r+s,i+d,f),this.ctx.arcTo(r+s,i+d,r,i+d,f),this.ctx.arcTo(r,i+d,r,i,f),this.ctx.arcTo(r,i,r+s,i,f),this.ctx.fill(),this.ctx.clip(),this.ctx.drawImage(e,r,i,s,d),console.log("canvasdrawer drwImge roundedRect:",f)}else this.ctx.drawImage(e,r,i,s,d);this.ctx.restore()},drawText:function(t){this.ctx.save();var e=t.MaxLineNumber,a=void 0===e?2:e,i=t.breakWord,n=void 0!==i&&i,r=t.color,c=void 0===r?"black":r,d=t.content,h=void 0===d?"":d,u=t.fontSize,l=void 0===u?16:u,g=t.top,f=void 0===g?0:g,w=t.left,v=void 0===w?0:w,x=t.lineHeight,m=void 0===x?20:x,p=t.textAlign,b=void 0===p?"left":p,T=t.width,I=t.bolder,D=void 0!==I&&I,y=t.textDecoration,F=void 0===y?"none":y;if(this.ctx.beginPath(),this.ctx.setTextBaseline("top"),this.ctx.setTextAlign(b),this.ctx.setFillStyle(c),this.ctx.setFontSize(1.2*l),n){for(var E="",L=f,P=1,R=0,S=0;S<h.length;S++)if(E+=[h[S]],R+=h[S].match(/[^\x00-\xff]/gi)?2:1,this.ctx.measureText(E).width>T||(R+3)*uni.upx2px(l)>T){if(P===a&&S!==h.length){E=E.substring(0,E.length-1)+"...",this.ctx.fillText(E,v,L),this.drawTextLine(v,L,F,c,l,E),E="",R=0;break}this.ctx.fillText(E,v,L),this.drawTextLine(v,L,F,c,l,E),E="",L+=m,P++}else 10==h.charCodeAt(S)&&(this.ctx.fillText(E,v,L),this.drawTextLine(v,L,F,c,l,E),E="",L+=m,P++);this.ctx.fillText(E,v,L),this.drawTextLine(v,L,F,c,l,E)}else if("center"==b){var _=(0,o.default)((v+T-this.ctx.measureText(h).width)/2);this.ctx.fillText(h,_,f),this.drawTextLine(_,f,F,c,l,h)}else if("right"==b){var A=(0,o.default)(v+T-this.ctx.measureText(h).width);this.ctx.fillText(h,A,f),this.drawTextLine(A,f,F,c,l,h),console.log("drawText() !breakWord content:",h,"Width:",this.width," width:",T," content len:",this.ctx.measureText(h).width,"textAlign:",b,"text_left:",A," left",v,"textDecoration:",F)}else this.ctx.fillText(h,v,f),this.drawTextLine(v,f,F,c,l,h);this.ctx.restore(),D&&this.drawText((0,s.default)({},t,{left:v+.3,top:f+.3,bolder:!1,textDecoration:"none"}))},getContent:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=0,n=0,r=[],o=0;i<t.length;o++)if(r[n]||(r[n]=""),r[n]+=t[o],t.charCodeAt(o)>127||t.charCodeAt(o)>=48&&t.charCodeAt(o)<=57?i+=2:i++,(i>=e||a-n==1&&i>=e-2)&&(i=0,n++),n===a)break;return r},drawTextLine:function(t,e,a,i,n,r){"underline"===a?this.drawRect({background:i,top:e+1.2*n,left:t-1,width:this.ctx.measureText(r).width+3,height:1}):"line-through"===a&&this.drawRect({background:i,top:e+.6*n,left:t-1,width:this.ctx.measureText(r).width+3,height:1})},drawRect:function(t){this.ctx.save();var e=t.background,a=t.top,i=void 0===a?0:a,n=t.left,r=void 0===n?0:n,o=t.width,s=void 0===o?0:o,c=t.height,d=void 0===c?0:c;this.ctx.setFillStyle(e),this.ctx.fillRect(r,i,s,d),this.ctx.restore()},getImageInfo:function(t){var e=this;return new r.default(function(a,i){if(e.cache[t])console.log(" canvasdrawer getImageInfo() cache[url]:",e.cache[t],"url:",t),a(e.cache[t]);else{var n=new RegExp(/^http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/),r=new RegExp(/^http:\/\/store\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/),o=new RegExp(/^wxfile:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/);uni.getImageInfo({src:t,complete:function(i){"getImageInfo:ok"===i.errMsg?(e.cache[t]=i.path,a(i.path)):(console.log("getImageInfo complete error url:",t,"res:",i),e.$emit("getImage",{errMsg:"canvasdrawer:download fail"}))},fail:function(a){console.log(" canvasdrawer wx.getImageInfo 接口调用失败",a,t),e.$emit("getImage",{errMsg:"canvasdrawer:getImageInfo 接口调用失败"})}}),n.test(t)||r.test(t)||o.test(t)||console.log("canvasdrawer getImageInfo cache url already:",t)}})},saveImageToLocal:function(){var t=this,e=this.width,a=this.height;wx.canvasToTempFilePath({x:0,y:0,width:e,height:a,canvasId:"canvasdrawer",complete:function(e){"canvasToTempFilePath:ok"===e.errMsg?(t.setData({showCanvas:!1,isPainting:!1,imageList:[],tempFileList:[]}),t.$emit("getImage",{tempFilePath:e.tempFilePath,errMsg:"canvasdrawer:ok"})):t.$emit("getImage",{errMsg:"canvasdrawer:fail"})}},this)},setData:function(t){var e,a,i=this,r=[];(0,n.default)(t).forEach(function(n){r=n.split("."),e=t[n],a=i.$data,r.forEach(function(t,n){n+1==r.length?i.$set(a,t,e):a[t]||i.$set(a,t,{}),a=a[t]})})}}};e.default=d},3936:function(t,e,a){"use strict";var i=a("288e");a("3b2b");var n=i(a("768b")),r=i(a("795b"));a("28a5"),a("a481");var o=i(a("e814"));function s(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=t.getHours(),r=t.getMinutes(),o=t.getSeconds();return[e,a,i].map(d).join("-")+" "+[n,r,o].map(d).join(":")}function c(t,e){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a=t?new Date(t):new Date,a.setDate(a.getDate()+e);var n=a.getFullYear(),r=a.getMonth()+1,o=a.getDate(),s=a.getHours(),c=a.getMinutes(),d=a.getSeconds();return r<10&&(r="0"+r),o<10&&(o="0"+o),s<10&&(s="0"+s),c<10&&(c="0"+c),d<10&&(d="0"+d),0==i?n+"-"+r+"-"+o:1==i?s+":"+c:2==i?s+":"+c+":"+d:n+"-"+r+"-"+o}function d(t){return t=t.toString(),t[1]?t:"0"+t}function h(t){var e,a=6e4,i=60*a,n=24*i,r=30*n,s=365*n,c=(new Date).getTime(),d=c-t;if(d<0)return"数据出错";var h=d/s,u=d/r,l=d/(7*n),g=d/n,f=d/i,w=d/a;return e=h>=1?(0,o.default)(h)+"年以前":u>=1?(0,o.default)(u)+"个月前":l>=1?(0,o.default)(l)+"星期前":g>=1?(0,o.default)(g)+"天前":f>=1?(0,o.default)(f)+"小时前":w>=5?(0,o.default)(w)+"分钟前":"刚刚发表",e}function u(t){if("string"==typeof t)return t=t.replace(/\ +/g,""),t=t.replace(/[\r\n]/g,""),t;console.log("去除回车换行空格失败！参数不是字符串类型")}function l(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=new Date(t.replace(/-/g,"/")),n=new Date(e.replace(/-/g,"/")),r=n.getTime()-i.getTime(),s=(0,o.default)(r/864e5);return 0==a?r:1==a?s:void 0}function g(t){var e=t.replace(/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/gi,"");return e}function f(t,e){t=t.split("."),e=e.split(".");var a=Math.max(t.length,e.length);while(t.length<a)t.push("0");while(e.length<a)e.push("0");for(var i=0;i<a;i++){var n=(0,o.default)(t[i]),r=(0,o.default)(e[i]);if(n>r)return 1;if(n<r)return-1}return 0}function w(t){var e="tmp_base64src";return new r.default(function(a,i){if(wx.getFileSystemManager){var r=wx.getFileSystemManager(),o=/data:image\/(\w+);base64,(.*)/.exec(t)||[],s=(0,n.default)(o,3),c=s[1],d=s[2];c||i(new Error("ERROR_BASE64SRC_PARSE"));var h="".concat(wx.env.USER_DATA_PATH,"/").concat(e,".").concat(c),u=wx.base64ToArrayBuffer(d);r.writeFile({filePath:h,data:u,encoding:"binary",success:function(){a(h)},fail:function(){i(new Error("ERROR_BASE64SRC_WRITE"))}})}else i(new Error("微信版本过低"))})}function v(){var t="ios";try{var e=wx.getSystemInfoSync();t=e.platform}catch(a){}return t}function x(t,e){return Math.round(t/(t+e)*1e4)/100+"%"}function m(t){return RegExp(/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/).test(t)}function p(t){return RegExp(/^1[34578]\d{9}$/).test(t)}a("6b54"),a("87b3"),t.exports={formatTime:s,getDateDiff:h,getDateStr:c,formatString:u,calDateDiff:l,compareVersion:f,filterEmoji:g,checkPhoneNumber:p,base64src:w,getPlatform:v,percentage:x,checkEmail:m}},4698:function(t,e,a){"use strict";a.r(e);var i=a("2d32"),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);e["default"]=n.a},"6c7b":function(t,e,a){var i=a("5ca1");i(i.P,"Array",{fill:a("36bd")}),a("9c6c")("fill")},"768b":function(t,e,a){"use strict";a.r(e);var i=a("a745"),n=a.n(i);function r(t){if(n()(t))return t}var o=a("5d73"),s=a.n(o);function c(t,e){var a=[],i=!0,n=!1,r=void 0;try{for(var o,c=s()(t);!(i=(o=c.next()).done);i=!0)if(a.push(o.value),e&&a.length===e)break}catch(d){n=!0,r=d}finally{try{i||null==c["return"]||c["return"]()}finally{if(n)throw r}}return a}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function h(t,e){return r(t)||c(t,e)||d()}a.d(e,"default",function(){return h})},"8f4a":function(t,e,a){var i=a("ac42");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("28401df8",i,!0,{sourceMap:!1,shadowMode:!1})},ac42:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".board[data-v-39fb3c39]{position:fixed;top:%?2000?%;background:#fff}",""])},dd53:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showCanvas?a("v-uni-canvas",{staticClass:"board",style:"width:"+t.width+"px;height:"+t.height+"px;",attrs:{"canvas-id":"canvasdrawer"}}):t._e()},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},f379:function(t,e,a){"use strict";var i=a("8f4a"),n=a.n(i);n.a}}]);