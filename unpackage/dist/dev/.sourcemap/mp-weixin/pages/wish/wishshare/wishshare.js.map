{"version":3,"sources":["webpack:///C:/Users/qzcsc/Documents/HBuilderProjects/appgift/appsendheart/myappdemo/main.js","webpack:///C:/Users/qzcsc/Documents/HBuilderProjects/appgift/appsendheart/myappdemo/pages/wish/wishshare/wishshare.vue?5dc4","webpack:///C:/Users/qzcsc/Documents/HBuilderProjects/appgift/appsendheart/myappdemo/pages/wish/wishshare/wishshare.vue?a7dd","webpack:///C:/Users/qzcsc/Documents/HBuilderProjects/appgift/appsendheart/myappdemo/pages/wish/wishshare/wishshare.vue?0aa6","webpack:///C:/Users/qzcsc/Documents/HBuilderProjects/appgift/appsendheart/myappdemo/pages/wish/wishshare/wishshare.vue?5e88","webpack:///C:/Users/qzcsc/Documents/HBuilderProjects/appgift/appsendheart/myappdemo/pages/wish/wishshare/wishshare.vue","webpack:///C:/Users/qzcsc/Documents/HBuilderProjects/appgift/appsendheart/myappdemo/pages/wish/wishshare/wishshare.vue?1c37","webpack:///C:/Users/qzcsc/Documents/HBuilderProjects/appgift/appsendheart/myappdemo/pages/wish/wishshare/wishshare.vue?8a70"],"names":["createPage","Page","CACHE_KEYS","util","require","weburl","getApp","globalData","shop_type","miniprogram_id","username","wx","getStorageSync","token","openid","userInfo","appid","secret","uploadurl","navList2_init","id","title","value","img","navList2","recorderManager","getRecorderManager","myaudio","createInnerAudioContext","options","duration","sampleRate","numberOfChannels","encodeBitRate","format","frameSize","data","postersData","posterImg","title_name","title_logo","share_goods_bg","activity_share_image","activity_avatarUrl","share_goods_avatarUrl","nickname","nickName","avatarUrl","painting","paintingData","views","imageList","tempFileList","isPainting","ctx","cache","shareImage","wechat_share","start_time","getDateStr","Date","overtime_status","notehidden","hidden_share","width","height","windowHeight","windowWidth","background","recordingTimeqwe","shutRecordingdis","openRecordingdis","new_rec_url","order_voice","voice_url","card_register_info","card_name_info","card_love_info","card_cele_info","card_template","card_color","card_type","dkheight","m_id","task","task_image","msg_id","activity_id","activity_image","activity_name","activity_headimg","share_art_id","share_art_cat_id","share_art_title","share_art_image","share_art_wx_headimg","share_goods_id","share_goods_price","share_goods_name","share_goods_org","share_goods_shape","share_goods_image","share_goods_image2","share_goods_wx_headimg","share_goods_title","share_goods_desc","share_goods_qrcode_cache","share_order_shape","share_order_id","share_order_note","share_order_bg","share_order_image","share_order_wx_headimg","loadingHidden","send_status","isSaveImageToPhotosAlbum","components","uniPopup","props","onLoad","that","console","log","is_back","setStorageSync","get_project_gift_para","parseInt","request","url","method","access_token","order_id","header","success","res","orderObjects","result","i","length","indexOf","replace","j","m_desc","JSON","parse","downloadFile","statusCode","tempFilePath","setData","setNavigationBarTitle","getSystemInfo","platform","version","SDKVersion","setTimeout","reloadData","onShow","onShareAppMessage","imageUrl","desc","share_goods_default_title","shareObj","path","errMsg","fail","complete","from","onReady","uni","removeStorageSync","createCanvasContext","methods","shareAction","showActionSheet","itemList","e","tapIndex","shareToWXSenceTimeline","shareToWXminiProgram","eventSave","chooseImage","count","sizeType","sourceType","share","provider","type","scene","tempFilePaths","err","showModal","content","stringify","miniProgram","webUrl","ret","recordingTimer","setInter","setInterval","time","formSubmit","formId","detail","form_name","currentTarget","dataset","name","submintFromId","goBack","pages","getCurrentPages","navigateBack","changed","switchTab","navList_new","startRecode","getSetting","authMap","authSetting","Object","keys","hasOwnProperty","showCancel","confirm","openSetting","showLoading","start","onStart","onError","endRecode","goods_id","stop","onStop","current_voice","hideLoading","clearInterval","src","autoplay","save_recorder","voice","urls","uploadFile","filePath","formData","latitude","encodeURI","longitude","restaurant_id","city","prov","retinfo","trim","update_order_note","showToast","icon","play_rec","play","cardvoicetime","rcv_note","order_shape","order_voicetime","order_data","status","info","image","share_activity_title","qr_type","title_len","substring","share_image_creat","bindTextAreaBlur","sharegoods","eventDraw","shareConfirm","shareCandel","share_goods_qrcode","share_art_qrcode","share_order_qrcode","clear","top","left","borderRadius","fontSize","color","textAlign","bolder","lineHeight","MaxLineNumber","breakWord","views_width","views_height","view_item","concat","readyPigment","saveImageToPhotosAlbum","radius","getImageList","toTempFilePath","canvasToTempFilePath","canvasId","push","downLoadImages","index","getImageInfo","then","imgInfo","startPainting","tailorImageDraw","view","px","wMultiple","originWidth","hMultiple","originHeight","sizeNormal","multiple","tempW","tempH","sx","sy","ex","ey","ow","oh","tailor","imageIndex","_img","_views","drawData","localPath","drawImage","drawText","drawRect","drawRound","draw","saveImageToLocal","_drawRadiusRect","params","x","y","w","h","r","beginPath","moveTo","lineTo","arc","Math","PI","save","fill","clip","restore","textDecoration","_setStyle","closePath","setTextBaseline","setFillStyle","setFontSize","setTextAlign","fillText","drawTextLine","fillTop","lineNum","len","match","measureText","upx2px","fillRect","Promise","resolve","reject","objExp","RegExp","test","Error","obj","val","forEach","key","split","$data","key2","$set"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,6G;AACAA,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwF;AAC3B;AACL;AACa;;;AAGrE;AAC+I;AAC/I,gBAAgB,wIAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAuzB,CAAgB,0sBAAG,EAAC,C;;;;;;;;;;;;gyBCA30B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,UAAU,GAAG,wBAAnB;AACA,IAAIC,IAAI,GAAGC,mBAAO,CAAC,uBAAD,CAAlB,C,CAAqC;;AAErC,IAAIC,MAAM,GAAGC,MAAM,GAAGC,UAAT,CAAoBF,MAAjC;AACA,IAAIG,SAAS,GAAGF,MAAM,GAAGC,UAAT,CAAoBC,SAApC;AACA,IAAIC,cAAc,GAAGH,MAAM,GAAGC,UAAT,CAAoBE,cAAzC;AACA,IAAIC,QAAQ,GAAGC,EAAE,CAACC,cAAH,CAAkB,UAAlB,IAAgCD,EAAE,CAACC,cAAH,CAAkB,UAAl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","file":"pages/wish/wishshare/wishshare.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/wish/wishshare/wishshare.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./wishshare.vue?vue&type=template&id=71bf0884&\"\nimport script from \"./wishshare.vue?vue&type=script&lang=js&\"\nexport * from \"./wishshare.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wishshare.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('71bf0884', component.options)\n    } else {\n      api.reload('71bf0884', component.options)\n    }\n    module.hot.accept(\"./wishshare.vue?vue&type=template&id=71bf0884&\", function () {\n      api.rerender('71bf0884', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/qzcsc/Documents/HBuilderProjects/appgift/appsendheart/myappdemo/pages/wish/wishshare/wishshare.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wishshare.vue?vue&type=template&id=71bf0884&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      $event.stopPropagation()\n      _vm.share_order_shape != 5 && _vm.share_order_shape != 4\n        ? \"sharegoods\"\n        : \"\"\n    }\n  }\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wishshare.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wishshare.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nconst CACHE_KEYS = 'canvasdrawer_pic_cache';\r\nvar util = require(\"utils/util.js\"); //获取应用实例\r\nimport uniPopup from '@/components/uni-popup/uni-popup.vue'\r\nvar weburl = getApp().globalData.weburl;\r\nvar shop_type = getApp().globalData.shop_type;\r\nvar miniprogram_id = getApp().globalData.miniprogram_id;\r\nvar username = wx.getStorageSync('username') ? wx.getStorageSync('username') : '';\r\nvar token = wx.getStorageSync('token') ? wx.getStorageSync('token') : '1';\r\nvar openid = wx.getStorageSync('openid') ? wx.getStorageSync('openid') : '';\r\nvar userInfo = wx.getStorageSync('userInfo') ? wx.getStorageSync('userInfo') : '';\r\nvar appid = getApp().globalData.appid;\r\nvar secret = getApp().globalData.secret;\r\nvar uploadurl = getApp().globalData.uploadurl;\r\nvar navList2_init = [{\r\n  id: \"gift_logo\",\r\n  title: \"送礼logo\",\r\n  value: \"\",\r\n  img: \"/uploads/gift_logo.png\"\r\n}, {\r\n  id: \"wishlist_logo\",\r\n  title: \"心愿单logo\",\r\n  value: \"\",\r\n  img: \"/uploads/wishlist.png\"\r\n}, {\r\n  id: \"trans_gift_logo\",\r\n  title: \"转送礼logo\",\r\n  value: \"\",\r\n  img: \"/uploads/gift_logo.png\"\r\n}, {\r\n  id: \"hall_banner\",\r\n  title: \"首页banner\",\r\n  value: \"\",\r\n  img: \"/uploads/songxin_banner.png\"\r\n}, {\r\n  id: \"wish_banner\",\r\n  title: \"心愿单banner\",\r\n  value: \"\",\r\n  img: \"/uploads/wish_banner.png\"\r\n}, {\r\n  id: \"wechat_share\",\r\n  title: \"背景\",\r\n  value: \"\",\r\n  img: \"/uploads/wechat_share.png\"\r\n}];\r\nvar navList2 = wx.getStorageSync('navList2') ? wx.getStorageSync('navList2') : [];\r\nconst recorderManager = wx.getRecorderManager();\r\nconst myaudio = wx.createInnerAudioContext();\r\nconst options = {\r\n  duration: 180 * 1000,\r\n  //指定录音的时长，单位 ms\r\n  sampleRate: 16000,\r\n  //采样率\r\n  numberOfChannels: 1,\r\n  //录音通道数\r\n  encodeBitRate: 96000,\r\n  //编码码率\r\n  format: 'mp3',\r\n  //音频格式，有效值 aac/mp3\r\n  frameSize: 50 //指定帧大小，单位 KB\r\n\r\n};\r\n//import canvasdrawer from \"../../../common/canvasdrawer/canvasdrawer\";\r\n//import postersLayer from '../../../components/posters-layer/index';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n\t\tpostersData: {},\r\n\t\tposterImg: {},\r\n      title_name: '分享',\r\n      title_logo: '/static/images/footer-icon-05.png',\r\n      share_goods_bg: weburl + '/uploads/share_goods_bg.png',\r\n      activity_share_image: weburl + '/uploads/activity_share.jpg',\r\n      activity_avatarUrl: weburl + '/uploads/avatar.png',\r\n      share_goods_avatarUrl: '/static/images/my.png',\r\n      nickname: userInfo.nickName,\r\n      avatarUrl: userInfo.avatarUrl,\r\n\t  miniprogram_id:miniprogram_id,\r\n      painting: {},\r\n\t  paintingData: { views: [] },\r\n\t  imageList: [],\r\n\t  tempFileList: [],\r\n\t  isPainting: false,\r\n\t  ctx: null,\r\n\t  cache: {},\r\n      shareImage: '',\r\n      shop_type: shop_type,\r\n      wechat_share: '',\r\n      start_time: util.getDateStr(new Date(), 0),\r\n      overtime_status: 0,\r\n      notehidden: true,\r\n      hidden_share: true,\r\n\t  width: 100,\r\n\t  height: 100,\r\n      windowHeight: 900,\r\n      windowWidth: 500,\r\n      background: '#f2f2f2',\r\n      recordingTimeqwe: \"\",\r\n      navList2: \"\",\r\n      shutRecordingdis: \"\",\r\n      openRecordingdis: \"\",\r\n      new_rec_url: \"\",\r\n      order_voice: \"\",\r\n      voice_url: \"\",\r\n      card_register_info: \"\",\r\n      card_name_info: \"\",\r\n      card_love_info: \"\",\r\n      card_cele_info: \"\",\r\n      card_template: \"\",\r\n      card_color: \"\",\r\n      card_type: \"\",\r\n      dkheight: \"\",\r\n      m_id: \"\",\r\n      task: \"\",\r\n      task_image: \"\",\r\n      msg_id: \"\",\r\n      activity_id: \"\",\r\n      activity_image: \"\",\r\n      activity_name: \"\",\r\n      activity_headimg: \"\",\r\n      share_art_id: \"\",\r\n      share_art_cat_id: \"\",\r\n      share_art_title: \"\",\r\n      share_art_image: \"\",\r\n      share_art_wx_headimg: \"\",\r\n      share_goods_id: \"\",\r\n      share_goods_price: \"\",\r\n      share_goods_name: \"\",\r\n      share_goods_org: \"\",\r\n      share_goods_shape: \"\",\r\n      share_goods_image: \"\",\r\n      share_goods_image2: \"\",\r\n      share_goods_wx_headimg: \"\",\r\n      share_goods_title: \"\",\r\n      share_goods_desc: \"\",\r\n      share_goods_qrcode_cache: \"\",\r\n      share_order_shape: \"\",\r\n      share_order_id: \"\",\r\n      share_order_note: \"\",\r\n      share_order_bg: \"\",\r\n      share_order_image: \"\",\r\n      share_order_wx_headimg: \"\",\r\n      loadingHidden: false,\r\n      send_status: 0,\r\n\t  isSaveImageToPhotosAlbum:false,\r\n    };\r\n  },\r\n\r\n  components: {\r\n    //canvasdrawer,\r\n\tuniPopup,\r\n\t//postersLayer,\r\n  },\r\n  props: {},\r\n\r\n  onLoad(options) {\r\n    var that = this;\r\n\tconsole.log('options:',options)\r\n    var is_back = options.is_back ? options.is_back : 0;\r\n    if (is_back == 1) options = wx.getStorageSync('wishshare_options');\r\n    var share_order_id = options.share_order_id ? options.share_order_id : 0;\r\n    var share_order_shape = options.share_order_shape ? options.share_order_shape : 1;\r\n    var card_type = options.card_type ? options.card_type : 0;\r\n    wx.setStorageSync('wishshare_options', options);\r\n    that.get_project_gift_para();\r\n\tconsole.log(' wishshare onload() 订单 share_order_id:', share_order_id,' share_order_shape:',share_order_shape,' options:',options); // 存储地址字段\r\n    if (share_order_id > 0 && (parseInt(share_order_shape) == 5 || parseInt(share_order_shape) == 4)) {\r\n      var username = wx.getStorageSync('username') ? wx.getStorageSync('username') : '';\r\n      var token = wx.getStorageSync('token') ? wx.getStorageSync('token') : '1';\r\n      var openid = wx.getStorageSync('openid') ? wx.getStorageSync('openid') : '';\r\n      wx.request({\r\n        url: weburl + '/api/client/query_order',\r\n        method: 'POST',\r\n        data: {\r\n          username: username ? username : openid,\r\n          access_token: token,\r\n          order_id: share_order_id,\r\n          shop_type: shop_type\r\n        },\r\n        header: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n          'Accept': 'application/json'\r\n        },\r\n        success: function (res) {\r\n          var orderObjects = res.data.result;\r\n          console.log(' wishshare onload() 订单查询:', orderObjects); // 存储地址字段\r\n\r\n          for (var i = 0; i < orderObjects.length; i++) {\r\n            if (orderObjects[i]['logo'].indexOf(\"http\") < 0) {\r\n              orderObjects[i]['logo'] = weburl + '/' + orderObjects[i]['logo'];\r\n            }\r\n\r\n            orderObjects[i]['logo'] = orderObjects[i]['logo'].replace('http:', 'https:');\r\n\r\n            for (var j = 0; j < orderObjects[i]['order_sku'].length; j++) {\r\n              if (orderObjects[i]['order_sku'][j]['sku_image'].indexOf(\"http\") < 0) {\r\n                orderObjects[i]['order_sku'][j]['sku_image'] = weburl + orderObjects[i]['order_sku'][j]['sku_image'];\r\n              }\r\n\r\n              orderObjects[i]['order_sku'][j]['sku_image'] = orderObjects[i]['order_sku'][j]['sku_image'].replace('http:', 'https:');\r\n            }\r\n          }\r\n\r\n          if ((orderObjects[0]['shape'] == 5 || orderObjects[0]['shape'] == 4) && orderObjects[0]['m_desc']) {\r\n            //console.log(' wishshare onload() 互动卡订单 m_desc:', orderObjects[0]['m_desc'])\r\n            var m_desc = JSON.parse(orderObjects[0]['m_desc']);\r\n            var voice_url = m_desc['voice'];\r\n\r\n            if (voice_url) {\r\n              wx.downloadFile({\r\n                url: voice_url,\r\n                //音频文件url                  \r\n                success: res => {\r\n                  if (res.statusCode === 200) {\r\n                    console.log('录音文件下载完成', res.tempFilePath);\r\n                    that.setData({\r\n                      order_voice: res.tempFilePath,\r\n                      voice_url: voice_url\r\n                    });\r\n                  }\r\n                }\r\n              });\r\n            } //var card_register_info = m_desc['card_register_info']\r\n\r\n\r\n            that.setData({\r\n              card_register_info: m_desc['card_register_info'] ? m_desc['card_register_info'] : '',\r\n              card_name_info: m_desc['card_name_info'] ? m_desc['card_name_info'] : '',\r\n              card_love_info: m_desc['card_love_info'] ? m_desc['card_love_info'] : '',\r\n              card_cele_info: m_desc['card_cele_info'] ? m_desc['card_cele_info'] : '',\r\n              card_template: m_desc['card_template'] ? m_desc['card_template'] : '',\r\n              card_color: m_desc['color'] ? m_desc['color'] : '#333',\r\n              card_type: m_desc['card_template'] ? m_desc['card_template'][0]['type'] : card_type\r\n            }); //console.log('card card_template:', that.data.card_template, ' card_love_info:', card_love_info)\r\n\r\n            wx.setNavigationBarTitle({\r\n              title: '互动分享'\r\n            });\r\n          }\r\n\r\n          console.log('card card_template:', that.card_template, ' card_love_info:', that.card_love_info);\r\n        }\r\n      });\r\n    }\r\n\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        console.log('wishshare getSystemInfo:', res);\r\n        that.setData({\r\n          windowHeight: res.windowHeight ? res.windowHeight : that.windowHeight,\r\n          windowWidth: res.windowWidth ? res.windowWidth : that.windowWidth,\r\n          dkheight: res.windowHeight - 10\r\n        });\r\n\r\n        if (res.platform == \"ios\") {\r\n          var version = res.SDKVersion;\r\n\t\t\t/*\r\n          if (util.compareVersion(version, '2.3.0') >= 0) {\r\n            wx.setInnerAudioOption({\r\n              obeyMuteSwitch: false\r\n            });\r\n          } else {\r\n            wx.showModal({\r\n              title: '提示',\r\n              content: '当前微信版本过低，静音模式下可能会导致播放音频失败。'\r\n            });\r\n          }\r\n\t\t  */\r\n        }\r\n      }\r\n    });\r\n    setTimeout(function () {\r\n      that.reloadData();\r\n    }, 1000);\r\n  },\r\n\r\n  onShow: function () {\r\n    var that = this;\r\n    //that.has_auth();\r\n    //getApp().globalData.getUserInfo(function (userInfo) {\r\n      //更新数据\r\n\t  /*\r\n      that.setData({\r\n        avatarUrl: userInfo ? userInfo.avatarUrl : '',\r\n        nickname: userInfo ? userInfo.nickName : ''\r\n      });\r\n      console.log('wishshare onShow get userInfo：', userInfo);\r\n\t \r\n    });\r\n\t */\r\n  },\r\n  onShareAppMessage: function (options) {\r\n    var that = this;\r\n    var res;\r\n    var m_id = that.m_id;\r\n    var username = wx.getStorageSync('username') ? wx.getStorageSync('username') : '';\r\n    var token = wx.getStorageSync('token') ? wx.getStorageSync('token') : '1';\r\n    var nickname = that.nickname;\r\n    var msg_id = that.msg_id;\r\n    var task = that.task;\r\n    var start_time = that.start_time;\r\n    var activity_id = that.activity_id ? that.activity_id : 0;\r\n    var activity_image = that.activity_image ? that.activity_image : that.activity_share_image;\r\n    var activity_name = that.activity_name ? that.activity_name : '我的位置';\r\n    var title = '收到' + nickname + '的送礼分享~';\r\n    var imageUrl = that.task_image ? that.task_image : that.wechat_share;\r\n    var desc = '送心礼物分享';\r\n    var share_goods_id = that.share_goods_id ? that.share_goods_id : 0;\r\n    var share_goods_image = that.share_goods_image2 ? that.share_goods_image2 : '';\r\n    var share_goods_wx_headimg = that.share_goods_wx_headimg ? that.share_goods_wx_headimg : that.share_goods_avatarUrl;\r\n    var share_goods_shape = that.share_goods_shape ? that.share_goods_shape : '1';\r\n    var share_goods_org = that.share_goods_org ? that.share_goods_org : '1'; //5虚拟商品 1自营商品\r\n\r\n    var share_goods_default_title = '';\r\n\r\n    if (share_goods_shape == 5) {\r\n      share_goods_default_title = '平安是福';\r\n    } else if (share_goods_shape == 4) {\r\n      share_goods_default_title = '一起来吧';\r\n    } else {\r\n      share_goods_default_title = '这个礼物真不错，来看看吧，要是你能送我就更好了~';\r\n    }\r\n\r\n    var share_goods_title = that.share_goods_title ? that.share_goods_title : share_goods_default_title;\r\n    var share_goods_desc = that.share_goods_desc ? that.share_goods_desc : '送礼就是送心~';\r\n    var share_art_id = that.share_art_id;\r\n    var share_art_cat_id = that.share_art_cat_id;\r\n    var share_art_image = that.share_art_image;\r\n    var share_art_title = that.share_art_title;\r\n    var share_order_id = that.share_order_id;\r\n    var share_order_image = that.share_order_image;\r\n    var share_order_shape = that.share_order_shape;\r\n    var share_order_note = that.share_order_note;\r\n    console.log('开始分享送礼任务', options);\r\n    var shareObj = {\r\n      title: title,\r\n      // 默认是小程序的名称(可以写slogan等)\r\n      desc: desc,\r\n      path: '/pages/hall/hall?task=' + task + '&msg_id=' + msg_id + '&refername=' + username + '&sharetime=' + start_time,\r\n      // 默认是当前页面，必须是以‘/’开头的完整路径\r\n      imageUrl: activity_id > 0 ? activity_image : imageUrl,\r\n      //自定义图片路径，可以是本地文件路径、代码包文件路径或者网络图片路径，支持PNG及JPG，不传入 imageUrl 则使用默认截图。显示图片长宽比是 5:4\r\n      success: function (res) {\r\n        console.log(res);\r\n\r\n        if (res.errMsg == 'shareAppMessage:ok') {\r\n          // 转发成功之后的回调\r\n          that.setData({\r\n            send_status: 1\r\n          });\r\n        }\r\n      },\r\n      fail: function (res) {\r\n        console.log(res);\r\n\r\n        if (res.errMsg == 'shareAppMessage:fail cancel') {// 转发失败之后的回调\r\n          // 用户取消转发\r\n        } else if (res.errMsg == 'shareAppMessage:fail') {// 转发失败，其中 detail message 为详细失败信息\r\n        }\r\n      },\r\n      complete: function () {// 转发结束之后的回调（转发成不成功都会执行）\r\n      }\r\n    };\r\n\r\n    if (options.from === 'button') {\r\n      if (activity_id > 0) {\r\n        shareObj['desc'] = '我的位置';\r\n        shareObj['title'] = nickname + ':' + share_goods_title ? share_goods_title : activity_name + '~';\r\n        shareObj['imageUrl'] = activity_image;\r\n        shareObj['path'] = '/pages/member/mylocation/mylocation?username=' + username + '&activity_id=' + activity_id;\r\n      }\r\n\r\n      if (share_goods_id > 0) {\r\n        shareObj['desc'] = share_goods_desc;\r\n        shareObj['title'] = share_goods_title;\r\n        shareObj['imageUrl'] = share_goods_image;\r\n        shareObj['path'] = '/pages/details/details?id=' + share_goods_id + '&image=' + share_goods_image + '&mid=' + m_id;\r\n      }\r\n\r\n      if (share_art_id > 0) {\r\n        shareObj['title'] = share_art_title;\r\n        shareObj['imageUrl'] = share_art_image;\r\n        shareObj['path'] = '/pages/my/index?art_id=' + share_art_id + '&art_cat_id=' + share_art_cat_id + '&mid=' + m_id;\r\n      }\r\n\r\n      if (share_order_shape == 4) {\r\n        if (that.card_register_info) {\r\n          shareObj['title'] = that.card_register_info['card_register_title'] ? that.card_register_info['card_register_title'] : '';\r\n        } else if (that.card_name_info) {\r\n          shareObj['title'] = that.card_name_info['card_name_name'] ? that.card_name_info['card_name_name'] + '的名片' : '';\r\n        } else if (that.card_cele_info) {\r\n          shareObj['title'] = that.card_cele_info['card_cele_title'] ? that.card_cele_info['card_cele_title'] + '的祝福' : '祝福';\r\n        } else if (that.card_love_info) {\r\n          shareObj['title'] = that.card_love_info['card_love_title'] ? that.card_love_info['card_love_title'] + '的爱心' : '爱心';\r\n        }\r\n\r\n        shareObj['imageUrl'] = that.shareImage; //share_order_image\r\n\r\n        shareObj['path'] = '/pages/order/receive/receive?receive=1&order_id=' + share_order_id + '&order_shape=' + share_order_shape + '&mid=' + m_id;\r\n      }\r\n\r\n      if (share_order_shape == 5) {\r\n        shareObj['title'] = share_order_note;\r\n        shareObj['imageUrl'] = that.shareImage; //share_order_image\r\n\r\n        shareObj['path'] = '/pages/order/receive/receive?receive=1&order_id=' + share_order_id + '&order_shape=' + share_order_shape + '&mid=' + m_id;\r\n      }\r\n\r\n      console.log('送心分享', shareObj);\r\n    } // 返回shareObj\r\n\r\n\r\n    return shareObj;\r\n  },\r\n  onReady: function () {\r\n  \tuni.removeStorageSync('CACHE_KEYS');\r\n  \tthis.cache = uni.getStorageSync('CACHE_KEYS') || {};\r\n  \tthis.ctx = uni.createCanvasContext('canvasdrawer',this);\r\n  },\r\n \r\n  methods: {\r\n\tshareAction() {\r\n\t\tuni.showActionSheet({\r\n\t\t\t//title:'分享',\r\n\t\t\titemList: ['微信朋友圈', '微信小程序'],\r\n\t\t\tsuccess: (e) => {\r\n\t\t\t\tconsole.log(e.tapIndex);\r\n\t\t\t\tswitch (e.tapIndex) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tthis.shareToWXSenceTimeline() ;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tthis.shareToWXminiProgram() ;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t/*\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:\"点击了第\" + e.tapIndex + \"个选项\",\r\n\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t})*/\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tshareToWXSenceTimeline: function () { //分享到朋友圈\r\n\t\tif(!this.isSaveImageToPhotosAlbum){\r\n\t\t\tthis.eventSave();\r\n\t\t}\r\n\t\tuni.chooseImage({\r\n\t          count: 1,\r\n\t          sizeType: ['compressed'],\r\n\t          sourceType: ['album'],\r\n\t          success: (res) => {\r\n\t            uni.share({\r\n\t              provider: 'weixin',\r\n\t              type: 2,\r\n\t\t\t\t  //href: \"http://uniapp.dcloud.io/\",\r\n\t              //title: that.share_goods_name?that.share_goods_name:'送心礼物分享',\r\n\t              scene: 'WXSenceTimeline', //WXSceneSession分享到聊天界面  WXSenceTimeline分享到朋友圈  WXSceneFavorite分享到微信收藏\r\n\t              imageUrl: res.tempFilePaths[0],\r\n\t              success: (res) => {\r\n\t                console.log(res)\r\n\t\t\t\t\t/*\r\n\t               uni.showModal({\r\n\t                   title: '分享成功',\r\n\t                   content: 'res:'+ JSON.stringify(res)\r\n\t               })\r\n\t\t\t\t   */\r\n\t              },\r\n\t              fail: (err) => {\r\n\t                console.log(err)\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t    title: '分享失败',\r\n\t\t\t\t\t\t    content: 'error:'+ JSON.stringify(err)\r\n\t\t\t\t\t\t}) \r\n\t              }\r\n\t            })\r\n\t          }\r\n\t\t}) \r\n\t},\r\n\tshareToWXminiProgram: function () { //分享到微信小程序\r\n\t\tif(!this.isSaveImageToPhotosAlbum){\r\n\t\t\tthis.eventSave();\r\n\t\t}\r\n\t\tvar share_goods_name = this.share_goods_name?this.share_goods_name:'送心礼物分享' ;\r\n\t\tvar share_goods_image = this.share_goods_image?this.share_goods_image:'' ;\r\n\t\tvar share_goods_id = this.share_goods_id?this.share_goods_id:0 ;\r\n\t\tvar username = wx.getStorageSync('username') ? wx.getStorageSync('username') : '';\r\n\t\tvar miniprogram_id = this.miniprogram_id ;\r\n\t\tuni.chooseImage({\r\n\t          count: 1,\r\n\t          sizeType: ['compressed'],\r\n\t          sourceType: ['album'],\r\n\t          success: (res) => {\r\n\t            uni.share({\r\n\t              provider: 'weixin',\r\n\t              type: 5,\r\n\t              title: share_goods_name,\r\n\t              imageUrl: share_goods_image?share_goods_image:res.tempFilePaths[0],\r\n\t\t\t\t  miniProgram: {\r\n\t\t\t\t          id: miniprogram_id,  // gh_aefe7ce896f6\r\n\t\t\t\t          path: 'pages/details/details?id='+share_goods_id+'&refername='+username,\r\n\t\t\t\t          type: 0,\r\n\t\t\t\t          webUrl: 'http://uniapp.dcloud.io'\r\n\t\t\t\t      },\r\n\t              success: (ret) => {\r\n\t                console.log(ret)\r\n\t\t\t\t\t/*\r\n\t               uni.showModal({\r\n\t                   title: '分享成功',\r\n\t                   content: 'res:'+ JSON.stringify(res)\r\n\t               })\r\n\t\t\t\t   */\r\n\t              },\r\n\t              fail: (err) => {\r\n\t                console.log(err)\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t    title: '分享失败',\r\n\t\t\t\t\t\t    content: 'error:'+ JSON.stringify(err)\r\n\t\t\t\t\t\t}) \r\n\t              }\r\n\t            })\r\n\t          }\r\n\t\t}) \r\n\t},\r\n\t \r\n    //录音计时器\r\n    recordingTimer: function () {\r\n      var that = this; //将计时器赋值给setInter\r\n\r\n      that.setInter = setInterval(function () {\r\n        var time = that.recordingTimeqwe + 1;\r\n        that.setData({\r\n          recordingTimeqwe: time\r\n        });\r\n      }, 1000);\r\n    },\r\n    formSubmit: function (e) {\r\n      var that = this;\r\n      var formId = e.detail.formId;\r\n      var form_name = e.currentTarget.dataset.name;\r\n      console.log('formSubmit() formID：', formId, ' form name:', form_name);\r\n\r\n      if (form_name == 'eventSave') {\r\n        that.eventSave();\r\n      }else if(form_name == 'onShare'){\r\n\t\t  that.shareAction();\r\n\t  }\r\n\r\n      if (formId) that.submintFromId(formId);\r\n    },\r\n    //提交formId，让服务器保存到数据库里\r\n    submintFromId: function (formId) {\r\n      var that = this;\r\n      var formId = formId;\r\n      var shop_type = that.shop_type;\r\n      var username = wx.getStorageSync('username') ? wx.getStorageSync('username') : '';\r\n      var token = wx.getStorageSync('token') ? wx.getStorageSync('token') : '1';\r\n      wx.request({\r\n        url: weburl + '/api/client/save_member_formid',\r\n        method: 'POST',\r\n        data: {\r\n          username: username,\r\n          access_token: token,\r\n          formId: formId,\r\n          shop_type: shop_type\r\n        },\r\n        header: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n          'Accept': 'application/json'\r\n        },\r\n        success: function (res) {\r\n          console.log('submintFromId() update success: ', res.data);\r\n        }\r\n      });\r\n    },\r\n    goBack: function () {\r\n      var that = this;\r\n      var pages = getCurrentPages();\r\n\r\n      if (pages.length > 1 && that.share_order_shape != 5 && that.share_order_shape != 4) {\r\n        wx.navigateBack({\r\n          changed: true\r\n        }); //返回上一页\r\n      } else if (that.share_order_shape == 5 || that.share_order_shape == 4) {\r\n        wx.switchTab({\r\n          url: '../../index/index'\r\n        });\r\n      } else {\r\n        wx.switchTab({\r\n          url: '../../hall/hall'\r\n        });\r\n      }\r\n    },\r\n    get_project_gift_para: function () {\r\n      var that = this;\r\n      var navList_new = wx.getStorageSync('navList2') ? wx.getStorageSync('navList2') : [{}];\r\n      var shop_type = that.shop_type;\r\n      console.log('wishshare get_project_gift_para navList2:', navList2);\r\n\r\n      if (navList2.length == 0) {\r\n        //项目列表\r\n        wx.request({\r\n          url: weburl + '/api/client/get_project_gift_para',\r\n          method: 'POST',\r\n          data: {\r\n            type: 2,\r\n            //暂定\r\n            shop_type: shop_type\r\n          },\r\n          header: {\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n            'Accept': 'application/json'\r\n          },\r\n          success: function (res) {\r\n            console.log('get_project_gift_para:', res.data.result);\r\n            var navList_new = res.data.result;\r\n\r\n            if (!navList_new) {\r\n              /*\r\n               wx.showToast({\r\n                 title: '没有菜单项2',\r\n                 icon: 'loading',\r\n                 duration: 1500\r\n               });\r\n               */\r\n              return;\r\n            } else {\r\n              that.setData({\r\n                navList2: navList_new,\r\n                wechat_share: navList_new[5]['img']\r\n              });\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        that.setData({\r\n          navList2: navList_new,\r\n          wechat_share: navList_new[5]['img']\r\n        });\r\n      }\r\n    },\r\n    startRecode: function () {\r\n      var that = this;\r\n      wx.getSetting({\r\n        success(res) {\r\n          var authMap = res.authSetting;\r\n          var length = Object.keys(authMap).length;\r\n          console.log(\"authMap info 长度:\" + length, authMap);\r\n\r\n          if (authMap.hasOwnProperty('scope.record')) {\r\n            if (!res.authSetting['scope.record']) {\r\n              wx.showModal({\r\n                title: '用户未授权',\r\n                content: '请授权录音权限',\r\n                showCancel: false,\r\n                success: function (res) {\r\n                  if (res.confirm) {\r\n                    console.log('用户点击确定授权录音权限');\r\n                    wx.openSetting({\r\n                      success: function success(res) {\r\n                        console.log('openSetting success', res.authSetting);\r\n                      }\r\n                    });\r\n                  }\r\n                }\r\n              });\r\n            }\r\n          }\r\n        }\r\n\r\n      });\r\n      that.setData({\r\n        shutRecordingdis: \"block\",\r\n        openRecordingdis: \"none\"\r\n      });\r\n      wx.showLoading({\r\n        title: '录音中'\r\n      }); //开始录音计时   \r\n\r\n      that.recordingTimer(); //开始录音\r\n\r\n      recorderManager.start(options);\r\n      recorderManager.onStart(() => {\r\n        console.log('开始录音');\r\n      }); //错误回调\r\n\r\n      recorderManager.onError(res => {\r\n        console.log('错误回调:', res);\r\n      });\r\n    },\r\n    endRecode: function () {\r\n      //结束录音 \r\n      var that = this;\r\n      var goods_id = that.share_goods_id;\r\n      recorderManager.stop();\r\n      recorderManager.onStop(res => {\r\n        console.log('停止录音', res.tempFilePath);\r\n        that.setData({\r\n          shutRecordingdis: \"none\",\r\n          openRecordingdis: \"block\"\r\n        });\r\n        that.current_voice = res.tempFilePath, wx.hideLoading(); //结束录音计时  \r\n\r\n        clearInterval(that.setInter);\r\n        myaudio.src = res.tempFilePath;\r\n        myaudio.autoplay = true;\r\n        that.save_recorder(res.tempFilePath);\r\n      });\r\n    },\r\n    save_recorder: function (voice) {\r\n      var that = this;\r\n      var goods_id = that.share_goods_id;\r\n      var urls = uploadurl;\r\n      wx.uploadFile({\r\n        url: uploadurl,\r\n        filePath: voice,\r\n        name: 'wechat_upimg',\r\n        formData: {\r\n          latitude: encodeURI(0.0),\r\n          longitude: encodeURI(0.0),\r\n          restaurant_id: encodeURI(0),\r\n          city: encodeURI('杭州'),\r\n          prov: encodeURI('浙江'),\r\n          name: encodeURI(goods_id) // 名称\r\n\r\n        },\r\n        success: function (res) {\r\n          var retinfo = JSON.parse(res.data.trim());\r\n          var new_rec_url = '';\r\n\r\n          if (retinfo['status'] == \"y\") {\r\n            new_rec_url = retinfo['result']['img_url'];\r\n            that.setData({\r\n              new_rec_url: new_rec_url\r\n            }); //wx.setStorageSync('cardvoice', new_rec_url)\r\n            //wx.setStorageSync('cardvoicetime', that.data.recordingTimeqwe)\r\n\r\n            /*\r\n            wx.showToast({\r\n              title: '录音上传完成',\r\n              icon: 'none',\r\n              duration: 1000,\r\n            })\r\n            */\r\n\r\n            console.log('录音上传完成', voice, new_rec_url);\r\n            that.update_order_note();\r\n          } else {\r\n            wx.showToast({\r\n              title: '录音上传返回失败',\r\n              icon: 'none',\r\n              duration: 1000\r\n            });\r\n            console.log('录音上传返回失败', voice, new_rec_url);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    play_rec: function () {\r\n      var that = this;\r\n      var goods_id = that.share_goods_id;\r\n      var order_voice = that.order_voice;\r\n      var voice_url = that.voice_url;\r\n\r\n      if (that.current_voice) {\r\n        myaudio.src = that.current_voice;\r\n        myaudio.play();\r\n      } else if (order_voice) {\r\n        myaudio.src = order_voice;\r\n        myaudio.play();\r\n      } else if (voice_url) {\r\n        wx.downloadFile({\r\n          url: new_rec_url,\r\n          //音频文件url                  \r\n          success: res => {\r\n            if (res.statusCode === 200) {\r\n              myaudio.src = res.tempFilePath;\r\n              myaudio.play();\r\n              console.log('录音播放完成', res.tempFilePath);\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        wx.showToast({\r\n          title: '暂无录音',\r\n          icon: 'none',\r\n          duration: 1000\r\n        });\r\n      }\r\n    },\r\n    update_order_note: function () {\r\n      var that = this;\r\n      var username = wx.getStorageSync('username') ? wx.getStorageSync('username') : '';\r\n      var token = wx.getStorageSync('token') ? wx.getStorageSync('token') : '1';\r\n      var share_order_id = that.share_order_id;\r\n      var share_order_note = that.share_order_note;\r\n      var share_order_shape = that.share_order_shape;\r\n      var new_rec_url = that.new_rec_url ? that.new_rec_url : that.voice_url;\r\n      var cardvoicetime = that.recordingTimeqwe ? that.recordingTimeqwe : that.cardvoicetime;\r\n      wx.request({\r\n        url: weburl + '/api/client/update_order_note',\r\n        method: 'POST',\r\n        data: {\r\n          username: username,\r\n          access_token: token,\r\n          shop_type: shop_type,\r\n          order_id: share_order_id,\r\n          rcv_note: share_order_note,\r\n          order_shape: share_order_shape,\r\n          order_voice: new_rec_url,\r\n          order_voicetime: cardvoicetime\r\n        },\r\n        header: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n          'Accept': 'application/json'\r\n        },\r\n        success: function (res) {\r\n          console.log('wishshare 修改订单信息完成:', res.data.result);\r\n          var order_data = res.data.result;\r\n\r\n          if (res.data.status == 'n') {\r\n            wx.showToast({\r\n              title: res.data.info,\r\n              icon: 'none',\r\n              duration: 2000\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    reloadData: function () {\r\n      var that = this;\r\n      var options = wx.getStorageSync('wishshare_options');\r\n      var m_id = wx.getStorageSync('m_id') ? wx.getStorageSync('m_id') : 0;\r\n      var task = options.task ? options.task : 0;\r\n      var task_image = options.image ? options.image : '';\r\n      var msg_id = options.msg_id ? options.msg_id : '';\r\n      var activity_id = options.activity_id ? options.activity_id : 0;\r\n      var activity_name = options.activity_name ? options.activity_name : 0;\r\n      var activity_image = options.activity_image ? options.activity_image : '';\r\n      var activity_headimg = options.activity_headimg ? options.activity_headimg : that.activity_avatarUrl;\r\n      var share_activity_title = options.share_activity_title ? options.share_activity_title : '这个地方真不错~';\r\n      var share_goods_id = options.share_goods_id ? options.share_goods_id : 0;\r\n      var share_goods_name = options.share_goods_name ? options.share_goods_name : '';\r\n      var share_goods_org = options.share_goods_org ? options.share_goods_org : '1'; //5虚拟商品 1自营商品\r\n\r\n      var share_goods_shape = options.share_goods_shape ? options.share_goods_shape : '1'; //5贺卡请柬 4互动卡 1普通商品\r\n\t  var qr_type  = options.qr_type ? options.qr_type : 'wishshare';\r\n      var share_goods_price = options.share_goods_price ? options.share_goods_price : 0;\r\n      var share_goods_image = options.share_goods_image ? options.share_goods_image : '';\r\n      var share_goods_image2 = options.share_goods_image2 ? options.share_goods_image2 : '';\r\n      var share_goods_qrcode_cache = weburl + '/api/WXPay/getQRCode?username=' + username + '&appid=' + appid + '&secret=' + secret + '&shop_type=' + shop_type + '&qr_type=' + qr_type + '&share_goods_id=' + share_goods_id + '&m_id=' + m_id;;\r\n      var share_goods_wx_headimg = options.share_goods_wx_headimg ? options.share_goods_wx_headimg : that.share_goods_avatarUrl;\r\n      var share_goods_default_title = '';\r\n\t \r\n\r\n      if (share_goods_shape == 5) {\r\n        share_goods_default_title = '平安是福';\r\n      } else if (share_goods_shape == 4) {\r\n        share_goods_default_title = '一起来吧';\r\n      } else {\r\n        share_goods_default_title = '这个礼物真不错，来看看吧，要是你能送我就更好了~';\r\n      }\r\n\r\n      var share_goods_title = options.share_goods_title ? options.share_goods_title : share_goods_default_title;\r\n      var share_goods_desc = options.share_goods_desc ? options.share_goods_desc : '送礼就是送心~';\r\n      var share_art_id = options.share_art_id ? options.share_art_id : 0;\r\n      var share_art_cat_id = options.share_art_cat_id ? options.share_art_cat_id : 0;\r\n      var share_art_title = options.share_art_title ? options.share_art_title : '';\r\n      var share_art_image = options.share_art_image ? options.share_art_image : '';\r\n      var share_art_wx_headimg = options.share_art_wx_headimg ? options.share_art_wx_headimg : '';\r\n      var share_order_id = options.share_order_id ? options.share_order_id : 0;\r\n      var share_order_note = options.share_order_note ? options.share_order_note : '';\r\n      var share_order_shape = options.share_order_shape ? options.share_order_shape : '1';\r\n      var share_order_bg = options.share_order_bg ? options.share_order_bg : '';\r\n      var share_order_image = options.share_order_image ? options.share_order_image : '';\r\n      var share_order_wx_headimg = options.share_order_wx_headimg ? options.share_order_wx_headimg : that.avatarUrl;\r\n      console.log('wishshare reloadData options:', options, 'share_order_wx_headimg:', share_order_wx_headimg, ' avatarUrl:', that.avatarUrl, 'share_goods_id:', share_goods_id, '');\r\n\t\tif(share_order_wx_headimg){\r\n\t\t\tif (share_order_wx_headimg.indexOf(\"https://wx.qlogo.cn\") >= 0) {\r\n\t\t\t  share_order_wx_headimg = share_order_wx_headimg.replace('https://wx.qlogo.cn', weburl + '/qlogo');\r\n\t\t\t} \r\n\t\t}\r\n     \r\n\t  //var cardvoice = wx.getStorageSync('cardvoice')\r\n      //var cardvoicetime = wx.getStorageSync('cardvoicetime')\r\n\r\n\r\n      that.setData({\r\n        m_id: m_id,\r\n        task: task,\r\n        task_image: task_image,\r\n        msg_id: msg_id,\r\n        activity_id: activity_id,\r\n        activity_image: activity_image,\r\n        activity_name: activity_name,\r\n        activity_headimg: activity_headimg,\r\n        share_art_id: share_art_id,\r\n        share_art_cat_id: share_art_cat_id,\r\n        share_art_title: share_art_title,\r\n        share_art_image: share_art_image,\r\n        share_art_wx_headimg: share_art_wx_headimg,\r\n        share_goods_id: share_goods_id,\r\n        share_goods_price: share_goods_price,\r\n        share_goods_name: share_goods_name,\r\n        share_goods_org: share_goods_org,\r\n        share_goods_shape: share_goods_shape,\r\n        share_goods_image: share_goods_image,\r\n        share_goods_image2: share_goods_image2,\r\n        share_goods_wx_headimg: share_goods_wx_headimg,\r\n        share_goods_title: activity_id > 0 ? share_activity_title : share_goods_title,\r\n        share_goods_desc: share_goods_desc,\r\n        share_goods_qrcode_cache: share_goods_qrcode_cache,\r\n        share_order_shape: share_order_shape,\r\n        share_order_id: share_order_id,\r\n        share_order_note: share_order_note,\r\n        share_order_bg: share_order_bg,\r\n        share_order_image: share_order_image,\r\n        share_order_wx_headimg: share_order_wx_headimg //cardvoice: cardvoice,\r\n        //cardvoicetime: cardvoicetime,\r\n\r\n      });\r\n\r\n      if (activity_name) {\r\n        var title_len = activity_name.length;\r\n\r\n        if (title_len > 13) {\r\n          wx.setNavigationBarTitle({\r\n            title: activity_name.substring(0, 10) + '...'\r\n          });\r\n        } else {\r\n          wx.setNavigationBarTitle({\r\n            title: activity_name\r\n          });\r\n        }\r\n      }\r\n\r\n      that.share_image_creat();\r\n    },\r\n    bindTextAreaBlur: function (e) {\r\n      var that = this;\r\n      var share_order_shape = that.share_order_shape;\r\n\r\n      if (share_order_shape == 5 || share_order_shape == 4) {\r\n        that.setData({\r\n          share_order_note: e.detail.value\r\n        });\r\n      } else {\r\n        that.setData({\r\n          share_goods_title: e.detail.value\r\n        });\r\n      }\r\n    },\r\n    sharegoods: function () {\r\n      var that = this;\r\n      var share_order_shape = that.share_order_shape;\r\n      if (share_order_shape == 4) return;\r\n      that.setData({\r\n        notehidden: !that.notehidden\r\n      });\r\n    },\r\n    share_image_creat: function () {\r\n      var that = this;\r\n      var share_order_shape = that.share_order_shape + 0;\r\n      var activity_id = that.activity_id + 0;\r\n      var share_goods_id = that.share_goods_id + 0;\r\n      wx.showToast({\r\n        title: share_order_shape == 5 || share_order_shape == 4 ? \"加载中\" : \"开始生成海报\",\r\n        icon: 'loading',\r\n        duration: 1500\r\n      });\r\n      console.log('share_image_creat share_goods_id:', share_goods_id, ' share_order_shape:', share_order_shape);\r\n\r\n      if (share_goods_id > 0 || activity_id > 0 || share_order_shape > 0) {\r\n        that.eventDraw();\r\n        that.setData({\r\n          loadingHidden: false\r\n        });\r\n      } else {\r\n        setTimeout(function () {\r\n          that.setData({\r\n            loadingHidden: true\r\n          });\r\n          that.share_image_creat();\r\n        }, 1200);\r\n      }\r\n    },\r\n    //确定按钮点击事件 \r\n    shareConfirm: function () {\r\n      var that = this;\r\n      that.setData({\r\n        notehidden: !that.notehidden,\r\n        hidden_share: !that.hidden_share\r\n      });\r\n      that.share_image_creat();\r\n      that.get_project_gift_para();\r\n    },\r\n    //取消按钮点击事件  \r\n    shareCandel: function () {\r\n      var that = this;\r\n      that.setData({\r\n        notehidden: !that.notehidden\r\n      });\r\n    },\r\n    eventDraw: function () {\r\n      var that = this;\r\n      var m_id = that.m_id;\r\n      var wechat_share = that.wechat_share ? that.wechat_share : that.task_image;\r\n      var shop_type = that.shop_type;\r\n      var qr_type = 'wishshare';\r\n      var task = that.task;\r\n      var msg_id = that.msg_id;\r\n      var activity_id = that.activity_id ? that.activity_id : 0;\r\n      var activity_image = that.activity_image ? that.activity_image : that.activity_share_image;\r\n      var activity_name = that.activity_name;\r\n      var share_activity_title = that.share_activity_title;\r\n      var share_goods_id = that.share_goods_id ? that.share_goods_id : 0;\r\n      var share_goods_bg = that.share_goods_bg;\r\n      var share_goods_name = that.share_goods_name ? that.share_goods_name : '';\r\n      var share_goods_price = that.share_goods_price ? that.share_goods_price : 0;\r\n      var share_goods_image = that.share_goods_image ? that.share_goods_image : '';\r\n      var share_goods_qrcode = that.share_goods_qrcode_cache ? that.share_goods_qrcode_cache : weburl + '/api/WXPay/getQRCode?username=' + username + '&appid=' + appid + '&secret=' + secret + '&shop_type=' + shop_type + '&qr_type=' + qr_type + '&share_goods_id=' + share_goods_id + '&m_id=' + m_id;\r\n      var share_goods_wx_headimg = that.share_goods_wx_headimg ? that.share_goods_wx_headimg : that.share_goods_avatarUrl;\r\n      var share_goods_title = that.share_goods_title;\r\n      var share_goods_desc = that.share_goods_desc;\r\n      var nickname = that.nickname?that.nickname:'朋友';\r\n      var share_art_id = that.share_art_id ? that.share_art_id : 0;\r\n      var share_art_cat_id = that.share_art_cat_id ? that.share_art_cat_id : 0;\r\n      var share_art_title = that.share_art_title ? that.share_art_title : '';\r\n      var share_art_image = that.share_art_image ? that.share_art_image : '';\r\n      var share_art_wx_headimg = that.share_art_wx_headimg ? that.share_art_wx_headimg : that.avatarUrl;\r\n      var share_art_qrcode = weburl + '/api/WXPay/getQRCode?username=' + username + '&appid=' + appid + '&secret=' + secret + '&shop_type=' + shop_type + '&qr_type=' + qr_type + '&share_art_id=' + share_art_id + '&share_art_cat_id=' + share_art_cat_id + '&m_id=' + m_id;\r\n      var share_order_id = that.share_order_id ? that.share_order_id : 0;\r\n      var share_order_note = that.share_order_note?that.share_order_note:share_goods_title;\r\n      var share_order_shape = that.share_order_shape;\r\n      var share_order_bg = that.share_order_bg;\r\n      var card_register_info = that.card_register_info; //shape:4 互动卡 \r\n\r\n      var card_name_info = that.card_name_info; //shape:4 互动卡 名片内容\r\n\r\n      var card_love_info = that.card_love_info; //shape:4 互动卡 爱心卡内容\r\n\r\n      var card_cele_info = that.card_cele_info; //shape:5 贺卡请柬 \r\n\r\n      var card_template = that.card_template; //shape:4 互动卡 名片模板\r\n\r\n      var card_type = that.card_type ? that.card_type : 0; //var card_color = that.data.card_color //贺卡请柬文字颜色\r\n\r\n      var share_order_wx_headimg = that.share_order_wx_headimg;\r\n      var share_order_qrcode = weburl + '/api/WXPay/getQRCode?username=' + username + '&appid=' + appid + '&secret=' + secret + '&shop_type=' + shop_type + '&qr_type=' + qr_type + '&share_order_id=' + share_order_id + '&share_order_shape=' + share_order_shape + '&m_id=' + m_id;\r\n     \r\n\t  wx.showLoading({\r\n        title: '生成中' //mask: true\r\n      });\r\n\t   \r\n      console.log('wishshare eventDraw share_order_shape:', share_order_shape, ' card_name_info:', card_name_info,' share_goods_id:',share_goods_id);\r\n\r\n      if (activity_id > 0) {\r\n        console.log('activity_id:', activity_id);\r\n        that.setData({\r\n          painting: {\r\n            width: 500,\r\n            height: 700,\r\n            windowHeight: that.windowHeight,\r\n            windowWidth: that.windowWidth,\r\n            clear: true,\r\n            background: 'white',\r\n            views: [{\r\n              type: 'image',\r\n              url: that.activity_headimg,\r\n              top: 8,\r\n              left: 10,\r\n              width: 50,\r\n              height: 50,\r\n              borderRadius: 25\r\n            }, {\r\n              type: 'text',\r\n              content: nickname + '在' + activity_name,\r\n              fontSize: 16,\r\n              color: '#999',\r\n              textAlign: 'left',\r\n              top: 20,\r\n              left: 70,\r\n              bolder: true\r\n            }, {\r\n              type: 'image',\r\n              url: activity_image,\r\n              top: 70,\r\n              left: 0,\r\n              width: 700,\r\n              height: 400\r\n            }, {\r\n              type: 'text',\r\n              content: '长按识别二维码查看具体位置',\r\n              fontSize: 18,\r\n              color: '#333',\r\n              textAlign: 'left',\r\n              top: 480,\r\n              left: 125 //lineHeight: 20,\r\n              //MaxLineNumber: 2,\r\n              //breakWord: true,\r\n              //width: 700\r\n\r\n            }, {\r\n              type: 'image',\r\n              url: weburl + '/api/WXPay/getQRCode?username=' + username + '&appid=' + appid + '&secret=' + secret + '&shop_type=' + shop_type + '&qr_type=' + qr_type + '&activity_id=' + activity_id,\r\n              top: 520,\r\n              left: 180,\r\n              width: 125,\r\n              height: 125\r\n            }]\r\n          }\r\n        });\r\n      } else if (share_goods_id) {\r\n        console.log('share_goods_id:', share_goods_id);\r\n        that.setData({\r\n          painting: {\r\n            width: 520,\r\n            height: 900,\r\n            //windowHeight: 550,\r\n            //windowWidth: 1000,\r\n            clear: true,\r\n            background: '#fff',\r\n            views: [{\r\n              type: 'image',\r\n              url: share_goods_bg,\r\n              // weburl + '/uploads/share_goods_bg.png'\r\n              top: 10,\r\n              left: 0,\r\n              width: 520,\r\n              height: 900\r\n            }, {\r\n              type: 'image',\r\n              url: that.share_goods_wx_headimg,\r\n              top: 45,\r\n              left: 30,\r\n              width: 50,\r\n              height: 50,\r\n              borderRadius: 25\r\n            }, {\r\n              type: 'text',\r\n              content: '来自' + nickname + '的分享',\r\n              fontSize: 18,\r\n              color: '#333',\r\n              textAlign: 'left',\r\n              top: 60,\r\n              left: 90,\r\n              bolder: false\r\n            }, {\r\n              type: 'image',\r\n              url: share_goods_image,\r\n              top: 120,\r\n              left: 85,\r\n              width: 350,\r\n              height: share_goods_price > 0 ? 350 : 480\r\n            }, {\r\n              type: 'text',\r\n              content: share_goods_name,\r\n              fontSize: 20,\r\n              color: '#333',\r\n              textAlign: 'left',\r\n              top: share_goods_price > 0 ? 490 : 620,\r\n              left: 85,\r\n              bolder: true,\r\n              lineHeight: 25,\r\n              MaxLineNumber: 3,\r\n              breakWord: true,\r\n              width: 350\r\n            }, {\r\n              type: 'text',\r\n              content: share_goods_price > 0 ? '￥' + share_goods_price : '',\r\n              fontSize: 20,\r\n              color: '#444444',\r\n              textAlign: 'left',\r\n              top: share_goods_price > 0 ? 560 : 670,\r\n              left: 85,\r\n              lineHeight: 25\r\n            }, {\r\n              type: 'text',\r\n              content: 'Ta说:',\r\n              fontSize: 20,\r\n              color: '#444',\r\n              textAlign: 'left',\r\n              top: share_goods_price > 0 ? 630 : 695,\r\n              left: 85,\r\n\t\t\t  lineHeight: 20,\r\n\t\t\t  MaxLineNumber: 2,\r\n\t\t\t  breakWord: true,\r\n              bolder: true\r\n            }, {\r\n              type: 'text',\r\n              content: share_order_note,\r\n              fontSize: 18,\r\n              color: '#666',\r\n              textAlign: 'left',\r\n              top: share_goods_price > 0 ? 660 : 720,\r\n              left: 85,\r\n              lineHeight: 25,\r\n              MaxLineNumber: 2,\r\n              breakWord: true,\r\n              width: 350\r\n            }, {\r\n              type: 'rect',\r\n              top: 770,\r\n              left: 85,\r\n              background: '#eeeeee',\r\n              width: 360,\r\n              height: 1\r\n            }, {\r\n              type: 'text',\r\n              content: '长按识别二维码查看详情',\r\n              fontSize: 18,\r\n              color: '#333',\r\n              textAlign: 'left',\r\n              top: 790,\r\n              left: 85,\r\n              breakWord: false,\r\n              bolder: true\r\n            }, {\r\n              type: 'text',\r\n              content: '送心礼物，开启礼物社交时代!',\r\n              fontSize: 18,\r\n              color: '#999',\r\n              textAlign: 'left',\r\n              top: 820,\r\n              left: 85,\r\n              breakWord: false\r\n            }, {\r\n              type: 'image',\r\n              url: share_goods_qrcode,\r\n              top: 780,\r\n              left: 360,\r\n              width: 90,\r\n              height: 90\r\n            }]\r\n          }\r\n        });\r\n      } else if (share_order_shape == 4 && card_register_info && share_goods_id == 0) {\r\n        //互动卡\r\n        console.log('share_order_shape:', share_order_shape);\r\n        var views_width = 500;\r\n        var views_height = 700;\r\n        var views = [{\r\n          type: 'image',\r\n          url: share_order_bg,\r\n          top: 5,\r\n          left: 5,\r\n          width: views_width,\r\n          height: views_height\r\n        }];\r\n\r\n        for (var i = 0; i < card_template.length; i++) {\r\n          var view_item = {};\r\n          view_item['top'] = card_template[i]['y'] * views_height;\r\n          view_item['left'] = card_template[i]['x'] * views_width;\r\n          view_item['width'] = card_template[i]['width'] * views_width;\r\n          view_item['height'] = card_template[i]['height'] * views_height;\r\n          view_item['lineHeight'] = card_template[i]['height'] * views_height;\r\n\r\n          if (card_template[i]['viewType'] == 1) {\r\n            if (card_template[i]['typeId'] == 'card_register_adv') {\r\n              view_item['type'] = 'image';\r\n              view_item['url'] = card_register_info['card_register_adv'] ? card_register_info['card_register_adv'] : '';\r\n              view_item['roundedRect'] = 10;\r\n            }\r\n\r\n            if (card_template[i]['typeId'] == 'card_register_logo' && card_register_info['has_shlogo']) {\r\n              view_item['type'] = 'image';\r\n              view_item['url'] = share_order_qrcode ? share_order_qrcode : '';\r\n              view_item['width'] = 70;\r\n              view_item['height'] = 70;\r\n              view_item['borderRadius'] = 35;\r\n            }\r\n          } else {\r\n            view_item['type'] = 'text';\r\n            view_item['fontSize'] = card_template[i]['styleSheet']['fontSize'];\r\n            view_item['fontSize'] = parseInt(view_item['fontSize']) + 8;\r\n            view_item['color'] = card_template[i]['color'] ? card_template[i]['color'] : '#333';\r\n            view_item['textAlign'] = 'left';\r\n            view_item['breakWord'] = false;\r\n\r\n            if (card_template[i]['typeId'] == 'card_register_title') {\r\n              view_item['content'] = card_register_info['card_register_title'] ? card_register_info['card_register_title'].trim() : '';\r\n              view_item['left'] = view_item['left'];\r\n            } else if (card_template[i]['typeId'] == 'card_register_content') {\r\n              //console.log('share_order_shape', share_order_shape,' card_register_content:',card_register_info)\r\n              view_item['MaxLineNumber'] = 6;\r\n              view_item['breakWord'] = true;\r\n              view_item['lineHeight'] = 32; //view_item['width'] = views_width\r\n\r\n              view_item['content'] = card_register_info['card_register_content'] ? card_register_info['card_register_content'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_register_ownername') {\r\n              view_item['content'] = card_register_info['card_register_ownername'] ? '发起人:' + card_register_info['card_register_ownername'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_register_ownerwechat') {\r\n              view_item['content'] = card_register_info['card_register_ownerwechat'] ? '微信:' + card_register_info['card_register_ownerwechat'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_register_addr') {\r\n              view_item['MaxLineNumber'] = 2;\r\n              view_item['breakWord'] = true;\r\n              view_item['lineHeight'] = 25;\r\n              view_item['content'] = card_register_info['card_register_addr'] ? '地址:' + card_register_info['card_register_addr'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_register_lim') {\r\n              view_item['content'] = card_register_info['card_register_lim'] > 0 ? '人数:' + card_register_info['card_register_lim'] : '人数:不限制';\r\n            } else if (card_template[i]['typeId'] == 'card_register_fee') {\r\n              view_item['content'] = card_register_info['card_register_fee'] > 0 ? '费用:￥' + card_register_info['card_register_fee'] : '费用:免费';\r\n            } else if (card_template[i]['typeId'] == 'register_start_date' && card_register_info['has_registerdue']) {\r\n              view_item['content'] = card_register_info['register_start_date'] ? '注册：' + card_register_info['register_start_date'] + ' ' : '';\r\n            } else if (card_template[i]['typeId'] == 'register_start_time' && card_register_info['has_registerdue']) {\r\n              view_item['content'] = card_register_info['register_start_time'] ? card_register_info['register_start_time'] : '';\r\n            } else if (card_template[i]['typeId'] == 'register_end_date' && card_register_info['has_registerdue']) {\r\n              view_item['content'] = card_register_info['register_end_date'] ? card_register_info['register_end_date'] : '';\r\n            } else if (card_template[i]['typeId'] == 'register_end_time' && card_register_info['has_registerdue']) {\r\n              view_item['content'] = card_register_info['register_end_time'] ? card_register_info['register_end_time'] : '';\r\n            } else if (card_template[i]['typeId'] == 'action_start_date' && card_register_info['has_actiondue']) {\r\n              view_item['content'] = card_register_info['action_start_date'] ? '活动：' + card_register_info['action_start_date'] + ' ' : '';\r\n            } else if (card_template[i]['typeId'] == 'action_start_time' && card_register_info['has_actiondue']) {\r\n              view_item['content'] = card_register_info['action_start_time'] ? card_register_info['action_start_time'] : '';\r\n            } else if (card_template[i]['typeId'] == 'action_end_date' && card_register_info['has_actiondue']) {\r\n              view_item['content'] = card_register_info['action_end_date'] ? card_register_info['action_end_date'] : '';\r\n            } else if (card_template[i]['typeId'] == 'action_end_time' && card_register_info['has_actiondue']) {\r\n              view_item['content'] = card_register_info['action_end_time'] ? card_register_info['action_end_time'] : '';\r\n            } //view_item['fontSize'] = view_item['fontSize'] < 15 ? 15 : view_item['fontSize']\r\n          }\r\n\r\n          views = views.concat(view_item);\r\n        }\r\n\r\n        that.setData({\r\n          painting: {\r\n            width: views_width,\r\n            height: views_height,\r\n            windowHeight: that.windowHeight,\r\n            windowWidth: that.windowWidth,\r\n            clear: true,\r\n            background: 'white',\r\n            views: views\r\n          }\r\n        });\r\n      } else if (share_order_shape == 4 && card_name_info && share_goods_id == 0) {\r\n        //互动卡 名片\r\n        var views_width = 720;\r\n        var views_height = 400;\r\n        /*\r\n        wx.getImageInfo({\r\n          src: share_order_bg,\r\n          success: function (res) {\r\n            views_width = res.width\r\n            views_height = res.height  \r\n          }\r\n        })  \r\n        */\r\n\r\n        var views = [{\r\n          type: 'image',\r\n          url: share_goods_bg,\r\n          top: 0,\r\n          left: 0,\r\n          width: views_width,\r\n          height: views_height\r\n        }, {\r\n          type: 'image',\r\n          url: share_order_bg,\r\n          top: 5,\r\n          left: 5,\r\n          width: views_width - 10,\r\n          height: views_height - 10\r\n        }];\r\n\r\n        for (var i = 0; i < card_template.length; i++) {\r\n          var view_item = {};\r\n          view_item['top'] = card_template[i]['y'] * views_height;\r\n          view_item['left'] = card_template[i]['x'] * views_width;\r\n          view_item['width'] = card_template[i]['width'] * views_width;\r\n          view_item['height'] = card_template[i]['height'] * views_height;\r\n          view_item['lineHeight'] = card_template[i]['height'] * views_height;\r\n\r\n          if (card_template[i]['viewType'] == 1) {\r\n            if (card_template[i]['typeId'] == 'card_logo' && card_name_info['card_name_logo_image']) {\r\n              view_item['type'] = 'image';\r\n              view_item['url'] = card_name_info['card_name_logo_image'] ? card_name_info['card_name_logo_image'] : '';\r\n              view_item['width'] = 80;\r\n              view_item['height'] = 80;\r\n            }\r\n\r\n            if (card_template[i]['typeId'] == 'card_qrcode' && card_name_info['has_shlogo']) {\r\n              view_item['type'] = 'image';\r\n              view_item['url'] = share_order_qrcode ? share_order_qrcode : '';\r\n              view_item['width'] = 70;\r\n              view_item['height'] = 70;\r\n              view_item['borderRadius'] = 35;\r\n            }\r\n          } else {\r\n            view_item['type'] = 'text';\r\n            view_item['fontSize'] = card_template[i]['styleSheet']['fontSize'];\r\n            view_item['fontSize'] = parseInt(view_item['fontSize']) + 8;\r\n            view_item['color'] = card_template[i]['color'] ? card_template[i]['color'] : '#333';\r\n            view_item['textAlign'] = 'left';\r\n            view_item['breakWord'] = false;\r\n\r\n            if (card_template[i]['typeId'] == 'card_name') {\r\n              view_item['content'] = card_name_info['card_name_name'] ? card_name_info['card_name_name'].trim() : '';\r\n              view_item['left'] = view_item['left']; //+ 5 * (10 - view_item['content'].length)\r\n\r\n              \r\n            } else if (card_template[i]['typeId'] == 'card_title') {\r\n              view_item['content'] = card_name_info['card_name_title'] ? card_name_info['card_name_title'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_phone') {\r\n              view_item['content'] = card_name_info['card_name_phone'] ? card_name_info['card_name_phone'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_tel') {\r\n              view_item['content'] = card_name_info['card_name_tel'] ? card_name_info['card_name_tel'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_email') {\r\n              view_item['content'] = card_name_info['card_name_email'] ? card_name_info['card_name_email'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_weburl') {\r\n              view_item['content'] = card_name_info['card_name_website'] ? card_name_info['card_name_website'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_publicwechat') {\r\n              view_item['content'] = card_name_info['card_name_publicwechat'] ? card_name_info['card_name_publicwechat'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_companyname') {\r\n              view_item['content'] = card_name_info['card_name_company'] ? card_name_info['card_name_company'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_addr') {\r\n              view_item['MaxLineNumber'] = 2;\r\n              view_item['breakWord'] = true;\r\n              view_item['lineHeight'] = 25;\r\n              view_item['content'] = card_name_info['card_name_addr'] ? card_name_info['card_name_addr'] : '';\r\n            }\r\n          }\r\n\r\n          views = views.concat(view_item);\r\n        }\r\n\r\n        that.setData({\r\n          painting: {\r\n            width: views_width,\r\n            height: views_height,\r\n            windowHeight: that.windowHeight,\r\n            windowWidth: that.windowWidth,\r\n            clear: true,\r\n            background: 'white',\r\n            views: views\r\n          }\r\n        });\r\n\t\tconsole.log('名片 share_order_shape views:',views);\r\n      } else if (share_order_shape == 4 && card_love_info && share_goods_id == 0) {\r\n        //互动卡 爱心卡\r\n        var views_width = 500;\r\n        var views_height = 700;\r\n        console.log('share_order_shape:', share_order_shape, ' card_template:', card_template, 'share_order_bg:', share_order_bg);\r\n        var views = [{\r\n          type: 'image',\r\n          url: share_order_bg,\r\n          top: 5,\r\n          left: 5,\r\n          width: views_width,\r\n          height: views_height\r\n        }];\r\n\r\n        for (var i = 0; i < card_template.length; i++) {\r\n          var view_item = {};\r\n          view_item['top'] = card_template[i]['y'] * views_height;\r\n          view_item['left'] = card_template[i]['x'] * views_width;\r\n          view_item['width'] = card_template[i]['width'] * views_width;\r\n          view_item['height'] = card_template[i]['height'] * views_height;\r\n          view_item['lineHeight'] = card_template[i]['height'] * views_height;\r\n\r\n          if (card_template[i]['viewType'] == 1) {\r\n            if (card_template[i]['typeId'] == 'card_love_logo' && card_love_info['card_love_logo']) {\r\n              view_item['type'] = 'image';\r\n              view_item['url'] = card_love_info['card_love_logo'] ? card_love_info['card_love_logo'] : ''; //view_item['width'] = 80\r\n              //view_item['height'] = 80\r\n            }\r\n\r\n            if (card_template[i]['typeId'] == 'card_love_qrcode' && card_love_info['has_shlogo']) {\r\n              view_item['type'] = 'image';\r\n              view_item['url'] = share_order_qrcode ? share_order_qrcode : '';\r\n              view_item['width'] = 70;\r\n              view_item['height'] = 70;\r\n              view_item['borderRadius'] = 35;\r\n            }\r\n          } else {\r\n            view_item['type'] = 'text';\r\n            view_item['fontSize'] = card_template[i]['styleSheet']['fontSize'];\r\n            view_item['fontSize'] = parseInt(view_item['fontSize']) + 8;\r\n            view_item['color'] = card_template[i]['color'] ? card_template[i]['color'] : '#333';\r\n            view_item['textAlign'] = 'left';\r\n            view_item['breakWord'] = false;\r\n\r\n            if (card_template[i]['typeId'] == 'card_love_title') {\r\n              view_item['content'] = card_love_info['card_love_title'] ? card_love_info['card_love_title'].trim() : '';\r\n              view_item['left'] = view_item['left']; //+ 5 * (10 - view_item['content'].length)\r\n\r\n              console.log('share_order_shape length:');\r\n            } else if (card_template[i]['typeId'] == 'card_love_related') {\r\n              view_item['content'] = card_love_info['card_love_related'] ? card_love_info['card_love_related'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_love_phone') {\r\n              view_item['content'] = card_love_info['card_love_phone'] ? '电话:' + card_love_info['card_love_phone'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_love_addr') {\r\n              view_item['MaxLineNumber'] = 2;\r\n              view_item['breakWord'] = true;\r\n              view_item['lineHeight'] = 25;\r\n              view_item['content'] = card_love_info['card_love_addr'] ? '地址:' + card_love_info['card_love_addr'] : '';\r\n            } else if (card_template[i]['typeId'] == 'card_love_content') {\r\n              view_item['MaxLineNumber'] = 6;\r\n              view_item['breakWord'] = true;\r\n              view_item['lineHeight'] = 30;\r\n              view_item['content'] = card_love_info['card_love_content'] ? card_love_info['card_love_content'] : '';\r\n            }\r\n          }\r\n\r\n          views = views.concat(view_item);\r\n        }\r\n\r\n        that.setData({\r\n          painting: {\r\n            width: views_width,\r\n            height: views_height,\r\n            windowHeight: that.windowHeight,\r\n            windowWidth: that.windowWidth,\r\n            clear: true,\r\n            background: 'white',\r\n            views: views\r\n          }\r\n        });\r\n      } else if ((share_order_shape == 5 || card_type == 10) && share_goods_id == 0) {\r\n        //贺卡请柬\r\n        console.log('share_order_shape:', share_order_shape, ' card_template:', card_template); //var views_width = that.data.windowWidth\r\n\r\n        var views_width = 500;\r\n        var views_height = 700;\r\n        /*\r\n        wx.getImageInfo({\r\n          src: share_order_bg,\r\n          success: function (res) {\r\n            views_width = res.width\r\n            views_height = res.height  \r\n          }\r\n        })  \r\n        */\r\n\r\n        var views = [{\r\n          type: 'image',\r\n          url: share_order_bg,\r\n          top: 5,\r\n          left: 5,\r\n          width: views_width,\r\n          height: views_height\r\n        }];\r\n\r\n        for (var i = 0; i < card_template.length; i++) {\r\n          var view_item = {};\r\n          view_item['top'] = card_template[i]['y'] * views_height;\r\n          view_item['left'] = card_template[i]['x'] * views_width;\r\n          view_item['width'] = card_template[i]['width'] * views_width;\r\n          view_item['height'] = card_template[i]['height'] * views_height;\r\n          view_item['lineHeight'] = card_template[i]['height'] * views_height;\r\n\r\n          if (card_template[i]['viewType'] == 1) {\r\n            if (card_template[i]['typeId'] == 'card_cele_logo') {\r\n              view_item['type'] = 'image';\r\n              view_item['url'] = card_cele_info['card_cele_logo'] ? card_cele_info['card_cele_logo'] : '';\r\n              view_item['roundedRect'] = 10;\r\n            }\r\n\r\n            if (card_template[i]['typeId'] == 'card_cele_qrcode' && card_cele_info['has_shlogo']) {\r\n              view_item['type'] = 'image';\r\n              view_item['url'] = share_order_qrcode ? share_order_qrcode : '';\r\n              view_item['width'] = 80;\r\n              view_item['height'] = 80;\r\n              view_item['borderRadius'] = 40;\r\n            }\r\n          } else {\r\n            view_item['type'] = 'text';\r\n            view_item['textAlign'] = 'left';\r\n            view_item['fontSize'] = card_template[i]['styleSheet']['fontSize'];\r\n            view_item['fontSize'] = parseInt(view_item['fontSize']) + 8;\r\n            view_item['color'] = card_template[i]['color'] ? card_template[i]['color'] : '#333';\r\n            view_item['breakWord'] = false;\r\n\r\n            if (card_template[i]['typeId'] == 'card_cele_title') {\r\n              view_item['textAlign'] = 'right';\r\n              view_item['content'] = card_cele_info['card_cele_title'] ? card_cele_info['card_cele_title'].trim() : ''; //view_item['left'] = view_item['left']  //+ 5 * (10 - view_item['content'].length)\r\n            } else if (card_template[i]['typeId'] == 'card_cele_content') {\r\n              view_item['MaxLineNumber'] = 6;\r\n              view_item['breakWord'] = true;\r\n              view_item['lineHeight'] = 25;\r\n              view_item['content'] = card_cele_info['card_cele_content'] ? card_cele_info['card_cele_content'] : '';\r\n            }\r\n\r\n            console.log('share_order_shape card cele card_template:', card_template[i]);\r\n          }\r\n\r\n          views = views.concat(view_item);\r\n        }\r\n\r\n        that.setData({\r\n          painting: {\r\n            width: views_width,\r\n            height: views_height,\r\n            windowHeight: that.windowHeight,\r\n            windowWidth: that.windowWidth,\r\n            clear: true,\r\n            background: 'white',\r\n            views: views\r\n          }\r\n        });\r\n      } else if (share_art_id > 0) {\r\n        console.log('share_art_id:', share_art_id);\r\n        that.setData({\r\n          painting: {\r\n            width: 520,\r\n            height: 680,\r\n            windowHeight: that.windowHeight,\r\n            windowWidth: that.windowWidth,\r\n            clear: true,\r\n            background: 'white',\r\n            views: [{\r\n              type: 'image',\r\n              url: share_art_wx_headimg,\r\n              top: 45,\r\n              left: 30,\r\n              width: 50,\r\n              height: 50,\r\n              borderRadius: 25\r\n            }, {\r\n              type: 'text',\r\n              content: '来自' + nickname + '的分享',\r\n              fontSize: 18,\r\n              color: '#333',\r\n              textAlign: 'left',\r\n              top: 60,\r\n              left: 90,\r\n              bolder: false\r\n            }, {\r\n              type: 'image',\r\n              url: share_art_image,\r\n              top: 120,\r\n              left: 85,\r\n              width: 350,\r\n              height: 350\r\n            }, {\r\n              type: 'text',\r\n              content: share_art_title,\r\n              fontSize: 20,\r\n              color: '#999',\r\n              textAlign: 'left',\r\n              top: 500,\r\n              left: 85,\r\n              bolder: true,\r\n              lineHeight: 25,\r\n              MaxLineNumber: 2,\r\n              breakWord: true,\r\n              width: 350\r\n            }, {\r\n              type: 'rect',\r\n              top: 540,\r\n              left: 85,\r\n              background: '#eeeeee',\r\n              width: 350,\r\n              height: 1\r\n            }, {\r\n              type: 'text',\r\n              content: '长按识别二维码查看详情',\r\n              fontSize: 18,\r\n              color: '#333',\r\n              textAlign: 'left',\r\n              top: 590,\r\n              left: 85,\r\n              breakWord: false,\r\n              bolder: true\r\n            }, {\r\n              type: 'image',\r\n              url: share_art_qrcode,\r\n              top: 550,\r\n              left: 330,\r\n              width: 90,\r\n              height: 90\r\n            }]\r\n          }\r\n        });\r\n      } else {\r\n        console.log('其他 else');\r\n        that.setData({\r\n          painting: {\r\n            width: 375,\r\n            height: 667,\r\n            windowHeight: that.windowHeight,\r\n            windowWidth: that.windowWidth,\r\n            background: 'white',\r\n            clear: true,\r\n            views: [{\r\n              type: 'image',\r\n              url: wechat_share,\r\n              top: 0,\r\n              left: 0,\r\n              width: 375,\r\n              height: 667\r\n            },\r\n            /*\r\n            {\r\n             type: 'image',\r\n             url: weburl+'/uploads/gift_logo.png',\r\n             top: 27.5,\r\n             left: 29,\r\n             width: 55,\r\n             height: 55\r\n            },\r\n                       {\r\n             type: 'text',\r\n             content: '您的好友【kuckboy】',\r\n             fontSize: 16,\r\n             color: '#402D16',\r\n             textAlign: 'left',\r\n             top: 33,\r\n             left: 96,\r\n             bolder: true\r\n            },\r\n            */\r\n            {\r\n              type: 'image',\r\n              url: weburl + '/api/WXPay/getQRCode?username=' + username + '&appid=' + appid + '&secret=' + secret + '&shop_type=' + shop_type + '&qr_type=' + qr_type + '&task=' + task + '&msg_id=' + msg_id,\r\n              top: 480,\r\n              left: 130,\r\n              width: 110,\r\n              height: 125\r\n            }, {\r\n              type: 'text',\r\n              content: '长按识别二维码，进入送心小程序',\r\n              fontSize: 12,\r\n              color: '#FFF',\r\n              textAlign: 'left',\r\n              top: 620,\r\n              left: 95,\r\n              lineHeight: 30,\r\n              MaxLineNumber: 2,\r\n              breakWord: true //width: 150\r\n\r\n            }]\r\n          }\r\n        });\r\n      }\r\n\r\n      console.log('二维码 paint:', that.painting);\r\n      that.setData({\r\n        loadingHidden: false\r\n      });\r\n\t  /*\r\n\t  wx.navigateTo({\r\n\t  \turl: '/pages/API/canvas/canvas?posterData=' + JSON.stringify(that.painting) \r\n\t  });\r\n\t   \r\n\t */\r\n\t  that.paintingData = that.painting;\r\n\t // that.ctx && that.ctx.clearActions();\r\n\t  if (!that.isPainting) {\r\n\t      if (that.paintingData.width && that.paintingData.height) {\r\n\t          that.isPainting = true;\r\n\t          try {\r\n\t              that.readyPigment();\r\n\t          }\r\n\t          catch(err) {\r\n\t  \t\tuni.showModal({\r\n\t  \t\t\ttitle: '系统错误',\r\n\t  \t\t\tcontent: err\r\n\t  \t\t\t}) \r\n\t          }\r\n\t      }\r\n\t  }\r\n\t\r\n    },\r\n\t\r\n    eventSave: function () {\r\n\t\t/*\r\n      wx.getSetting({\r\n        success(res) {\r\n          var authMap = res.authSetting;\r\n          var length = Object.keys(authMap).length;\r\n          console.log(\"authMap info 长度:\" + length, authMap);\r\n\r\n          if (authMap.hasOwnProperty('scope.writePhotosAlbum')) {\r\n            if (!res.authSetting['scope.writePhotosAlbum']) {\r\n              wx.showModal({\r\n                title: '用户未授权',\r\n                content: '请授权保存相册权限',\r\n                showCancel: false,\r\n                success: function (res) {\r\n                  if (res.confirm) {\r\n                    console.log('用户点击确定授权保存相册权限');\r\n                    wx.openSetting({\r\n                      success: function success(res) {\r\n                        console.log('openSetting success', res.authSetting);\r\n                      }\r\n                    });\r\n                  }\r\n                }\r\n              });\r\n            }\r\n          }\r\n        }\r\n\r\n      });\r\n\t  */\r\n      wx.saveImageToPhotosAlbum({\r\n        filePath: this.shareImage,\r\n\r\n        success(res) {\r\n          wx.showToast({\r\n            title: '图片已保存到相册，赶紧晒一下吧~',\r\n            icon: 'none',\r\n            duration: 1500\r\n          });\r\n\t\t  this.isSaveImageToPhotosAlbum = true;\r\n        }\r\n\r\n      });\r\n    },\r\n\t/*\r\n    eventGetImage: function (event) {\r\n\t\tlet that = this\r\n      //console.log(event)\r\n      console.log('wishshare 画布eventGetImage:', event);\r\n      const {\r\n        tempFilePath,\r\n        errMsg\r\n      } = event;\r\n\t \r\n\t  that.shareImage = tempFilePath\r\n      if (errMsg === 'canvasdrawer:ok') {  \r\n        //wx.hideLoading();\r\n      }\r\n    },\r\n\t*/\r\n\treadyPigment: function () {\r\n\t    const { width, height, views, background, radius = 0 } = this.paintingData;\r\n\t    this.width = width;\r\n\t    this.height = height;\r\n\t\t//const { width, height, views, background, radius = 0 } = this.posterData;\r\n\t\t/*\r\n\t\tfor (let i = 0; i < views.length; i++) {\r\n\t\t\t//console.log('canvasdrawer onload views.length:',views.length,' i:',i) ;\r\n\t\t    if (views[i].type === 'image') {\r\n\t\t        //let _img = views[i].url;\r\n\t\t        let _views = views[i];\r\n\t\t        let drawData = {};\r\n\t\t\t\t \r\n\t\t        drawData = {\r\n\t\t            ..._views,\r\n\t\t        };\r\n\t\t\t\tconsole.log('canvasdrawer onload image drawData:',drawData,' i:',i) ;\r\n\t\t        this.drawImage(drawData);\r\n\t\t\t\t\r\n\t\t    } else if (views[i].type === 'text') {\r\n\t\t\t\t this.drawText(views[i]);\r\n\t\t    } else if (views[i].type === 'rect') {\r\n\t\t        this.drawRect(views[i]);\r\n\t\t    } else if (views[i].type === 'round') {\r\n\t\t        this.drawRound(views[i]);\r\n\t\t    }\r\n\t\t}\r\n\t\t\r\n\t\tthis.ctx.draw(true, () => {\r\n\t\t     this.toTempFilePath();\r\n\t\t})\r\n\t\t*/\r\n\t   this.getImageList(views)\r\n\t},\r\n\ttoTempFilePath: function() {\r\n\t\tlet that = this\r\n\t\tuni.canvasToTempFilePath({\r\n\t\t\tcanvasId: 'canvasdrawer',\r\n\t\t\tsuccess: function(res) {\r\n\t\t\t\t//console.log(res.tempFilePath)\r\n\t\t\t\tthat.shareImage = res.tempFilePath\r\n\t\t\t\tthat.isPainting = false\r\n\t\t\t\t wx.hideLoading();\r\n\t\t\t\t /*\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t    title: '临时保存',\r\n\t\t\t\t    content: 'draw isPainting:'+ that.isPainting\r\n\t\t\t\t}) \r\n\t\t\t\t */\r\n\t\t\t},\r\n\t\t\tfail: function(err) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t    title: '临时保存失败',\r\n\t\t\t\t    content: 'draw error:'+ JSON.stringify(err)\r\n\t\t\t\t}) \r\n\t\t\t\t wx.hideLoading();\r\n\t\t\t\t//console.error('toTempFilePath error:'+JSON.stringify(err))\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tgetImageList: function (views) {\r\n\t    const imageList = [];\r\n\t    for (let i = 0; i < views.length; i++) {\r\n\t        if (views[i].type === 'image') {\r\n\t            imageList.push(views[i].url);\r\n\t        }\r\n\t    }\r\n\t    this.imageList = imageList;\r\n\t\tthis.downLoadImages(0);\r\n\t},\r\n\tdownLoadImages: function (index) {\r\n\t    const imageList = this.imageList;\r\n\t    const tempFileList = this.tempFileList;\r\n\t    if (index < imageList.length) {\r\n\t        // \r\n\t        this.getImageInfo(imageList[index]).then(imgInfo => {\r\n\t\t\t\tif(imgInfo.url) {\r\n\t\t\t\t\r\n\t\t\t\t} \r\n\t\t\t\ttempFileList.push(imgInfo)\r\n\t\t\t\tconsole.log('图片临时文件imgInfo:',imgInfo)\r\n\t\t\t\tthis.tempFileList = tempFileList;\r\n\t\t\t\tthis.downLoadImages(index + 1);\r\n\t        })\r\n\t    } else {\r\n\t\t\tconsole.log('图片临时文件tempFileList:',tempFileList)\r\n\t        this.startPainting();\r\n\t    }\r\n\t},\r\n\ttailorImageDraw: function (view, imgInfo) {\r\n\t    // _views.tailor == 'center'\r\n\t    let px = 1;\r\n\t    let wMultiple = (view.width * px) / imgInfo.originWidth;\r\n\t    let hMultiple = (view.height * px) / imgInfo.originHeight;\r\n\t    let sizeNormal = false;\r\n\t    if (wMultiple <= 1 && hMultiple <= 1) {\r\n\t        let multiple = wMultiple > hMultiple ? wMultiple : hMultiple;\r\n\t        // let tempW = imgInfo.originWidth * multiple;\r\n\t        // let tempH = imgInfo.originHeight * multiple;\r\n\t        let tempW = (view.width * px) / multiple;\r\n\t        let tempH = (view.height * px) / multiple;\r\n\t        let sx = (imgInfo.originWidth - tempW) / 2;\r\n\t        let sy = (imgInfo.originHeight - tempH) / 2;\r\n\t        let ex = sx + tempW;\r\n\t        let ey = sy + tempH;\r\n\t        view['sx'] = sx || 0;\r\n\t        view['sy'] = sy || 0;\r\n\t        view['ex'] = ex || 0;\r\n\t        view['ey'] = ey || 0;\r\n\t        sizeNormal = true;\r\n\t    }\r\n\t    const data = {\r\n\t        ...view,\r\n\t        ow: imgInfo.originWidth,\r\n\t        oh: imgInfo.originHeight\r\n\t    };\r\n\t    // console.log(JSON.stringify(data));\r\n\t    if (!sizeNormal) {\r\n\t        delete data.tailor;\r\n\t    }\r\n\t    // this.drawImage(data);\r\n\t    return data;\r\n\t},\r\n \r\n\tstartPainting: function () {\r\n\t    const { tempFileList, paintingData: { views } } = this;\r\n\t    for (let i = 0, imageIndex = 0; i < views.length; i++) {\r\n\t        if (views[i].type === 'image') {\r\n\t            let _img = tempFileList[imageIndex];\r\n\t            let _views = views[i];\r\n\t            let drawData = {};\r\n\t            if (_views.tailor) {\r\n\t                _views = this.tailorImageDraw(_views, _img);\r\n\t            }\r\n\t\t\t\tif(_img) _views['url'] = _img.localPath ;\r\n\t            drawData = {\r\n\t                ..._views,\r\n\t               // url: _img.localPath\r\n\t            };\r\n\t\t\t\tif(_views['url']) this.drawImage(drawData);\r\n\t            // if (_views.radius) {\r\n\t            //     this.drawRoundRect(drawData);\r\n\t            // }\r\n\t            // else {\r\n\t            // }\r\n\t            imageIndex++;\r\n\t\t\t\t\r\n\t        } else if (views[i].type === 'text') {\r\n\t\t\t\t this.drawText(views[i]);\r\n\t        } else if (views[i].type === 'rect') {\r\n\t            this.drawRect(views[i]);\r\n\t        }\r\n\t        else if (views[i].type === 'round') {\r\n\t            this.drawRound(views[i]);\r\n\t        }\r\n\t    }\r\n\t\t \r\n\t    this.ctx.draw(true, () => {\r\n\t        uni.setStorageSync('CACHE_KEYS', this.cache);\r\n\t        this.saveImageToLocal();\r\n\t    })\r\n\t \r\n\t},\r\n\t \r\n\t_drawRadiusRect: function (params) {\r\n\t    const {\r\n\t        top = 0,\r\n\t        left = 0,\r\n\t        width = 0,\r\n\t        height = 0,\r\n\t        radius = 0,\r\n\t     } = params;\r\n\t    let x = left;\r\n\t    let y = top;\r\n\t    let w = width;\r\n\t    let h = height;\r\n\t    // let bgc = background;\r\n\t    let r = radius;\r\n\t    // let br = radius;\r\n\t    this.ctx.beginPath();\r\n\t    this.ctx.moveTo(x + r, y);    // 移动到左上角的点\r\n\t    this.ctx.lineTo(x + w - r, y);\r\n\t    this.ctx.arc(x + w - r, y + r, r, 2 * Math.PI * (3 / 4), 2 * Math.PI * (4 / 4));\r\n\t    this.ctx.lineTo(x + w, y + h - r);\r\n\t    this.ctx.arc(x + w - r, y + h - r, r, 0, 2 * Math.PI * (1 / 4));\r\n\t    this.ctx.lineTo(x + r, y + h);\r\n\t    this.ctx.arc(x + r, y + h - r, r, 2 * Math.PI * (1 / 4), 2 * Math.PI * (2 / 4));\r\n\t    this.ctx.lineTo((x), (y + r));\r\n\t    this.ctx.arc(x + r, y + r, r, 2 * Math.PI * (2 / 4), 2 * Math.PI * (3 / 4));\r\n\t\r\n\t    // this.ctx.moveTo(x + r, y);\r\n\t    // this.ctx.arcTo(x + w, y, x + w, y + h, r);\r\n\t    // this.ctx.arcTo(x + w, y + h, x, y + h, r);\r\n\t    // this.ctx.arcTo(x, y + h, x, y, r);\r\n\t    // this.ctx.arcTo(x, y, x + w, y, r);\r\n\t},\r\n\tdrawImage: function (params) {\r\n\t    const {\r\n\t        type = '',\r\n\t        background,\r\n\t        top = 0,\r\n\t        left = 0,\r\n\t        width = 0,\r\n\t        height = 0,\r\n\t        radius = 0,\r\n\t        url = '',\r\n\t        sx = 0,\r\n\t        sy = 0,\r\n\t        ex = 0,\r\n\t        ey = 0\r\n\t    } = params;\r\n\t\t//console.log('wishshare drawImage params:',params);\r\n\t\t \r\n\t    let x = left;\r\n\t    let y = top;\r\n\t    let w = width;\r\n\t    let h = height;\r\n\t    let r = radius;\r\n\t    this.ctx.save();\r\n\t    if (radius) {\r\n\t        this.ctx.beginPath();\r\n\t        \r\n\t\r\n\t        // if (radius === parseInt(width / 2)) {\r\n\t        //     console.log('圆');\r\n\t        //     this.ctx.beginPath();\r\n\t        //     this.ctx.arc(left + radius, top + radius, radius, 0, 2 * Math.PI);\r\n\t        //     this.ctx.setFillStyle(params.background || '#ffffff')\r\n\t        //     this.ctx.fill()\r\n\t        //     this.ctx.clip();\r\n\t        //     this.ctx.drawImage(url, x, y, w, h);\r\n\t        // }\r\n\t        // else {\r\n\t        // }\r\n\t        this._drawRadiusRect(params);\r\n\t        this.ctx.fill();\r\n\t        this.ctx.clip();\r\n\t    }\r\n\t    if ('tailor' in params) {\r\n\t\t\tif(url){\r\n\t\t\t\t this.ctx.drawImage(url, sx, sy, ex, ey, left, top, width, height);\r\n\t\t\t}else{\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t    title: 'tailor图片文件不存在',\r\n\t\t\t\t    content: 'draw url:'+ url\r\n\t\t\t\t}) \r\n\t\t\t}\r\n\t    } else {\r\n\t\t\tif(url){\r\n\t\t\t\t this.ctx.drawImage(url, left, top, width, height);\r\n\t\t\t\t console.log('wishshare drawImage url:',url, left, top, width, height);\r\n\t\t\t}else{\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t    title: 'drawImage 图片文件不存在',\r\n\t\t\t\t    content: 'draw url:'+ url\r\n\t\t\t\t}) \r\n\t\t\t}\r\n\t       \r\n\t    }\r\n\t    // this.drawImage(params);\r\n\t    \r\n\t    this.ctx.restore();\r\n\t},\r\n\t\r\n\tdrawText: function (params) {\r\n\t    let {\r\n\t        MaxLineNumber = 2,\r\n\t        breakWord = false,\r\n\t        color = 'black',\r\n\t        content = '',\r\n\t        fontSize = 16,\r\n\t        top = 0,\r\n\t        left = 0,\r\n\t        lineHeight = 20,\r\n\t        textAlign = 'left',\r\n\t        width,\r\n\t        bolder = false,\r\n\t        textDecoration = 'none'\r\n\t    } = params;\r\n\t    if (bolder) {\r\n\t        top -= 0.3;\r\n\t    }\r\n\t    // this.ctx.save();\r\n\t    // this.ctx.beginPath();\r\n\t    // this.ctx.stroke();\r\n\t    let _setStyle = () => {\r\n\t        // this.ctx.save();\r\n\t        this.ctx.closePath();\r\n\t        this.ctx.beginPath();\r\n\t        this.ctx.setTextBaseline('top');\r\n\t        this.ctx.setFillStyle(color);\r\n\t        this.ctx.setFontSize(fontSize);\r\n\t        this.ctx.setTextAlign(textAlign);\r\n\t    }\r\n\t    _setStyle();\r\n\t    if (!breakWord) {\r\n\t        this.ctx.fillText(content, left, top);\r\n\t        this.drawTextLine(left, top, textDecoration, color, fontSize, content);\r\n\t    } else {\r\n\t        let fillText = '';\r\n\t        let fillTop = top;\r\n\t        let lineNum = 1;\r\n\t\t\tlet len = 0;  \r\n\t        for (let i = 0; i < content.length; i++) {\r\n\t\t\t\tlen += content[i].match(/[^\\x00-\\xff]/ig)?2:1   //计算汉字和字母的宽度\r\n\t            fillText += [content[i]];\r\n\t            // _setStyle();\r\n\t            if (this.ctx.measureText(fillText).width> width || (len+3)*uni.upx2px(fontSize) > width) { //uni-app APP端measureText bug 规避\r\n\t                if (lineNum === MaxLineNumber) {\r\n\t                    if (i !== content.length) {\r\n\t                        fillText = fillText.substring(0, fillText.length - 1) + '...';\r\n\t                        // _setStyle();\r\n\t                        this.ctx.fillText(fillText, left, fillTop);\r\n\t                        this.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\r\n\t                        fillText = '';\r\n\t                        break;\r\n\t                    }\r\n\t                }\r\n\t                // _setStyle();\r\n\t                this.ctx.fillText(fillText, left, fillTop);\r\n\t                this.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\r\n\t                fillText = '';\r\n\t\t\t\t\tlen = 0 ;\r\n\t                fillTop += lineHeight;\r\n\t                lineNum++;\r\n\t            }\r\n\t        }\r\n\t        // _setStyle();\r\n\t        this.ctx.fillText(fillText, left, fillTop);\r\n\t        this.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\r\n\t    }\r\n\t    // this.ctx.draw();\r\n\t    if (bolder) {\r\n\t        this.drawText({\r\n\t            ...params,\r\n\t            left: left - 0.3,\r\n\t            top: top,\r\n\t            bolder: false,\r\n\t            textDecoration: 'none'\r\n\t        });\r\n\t    }\r\n\t},\r\n\tdrawTextLine: function (left, top, textDecoration, color, fontSize, content) {\r\n\t    if (textDecoration === 'underline') {\r\n\t        this.drawRect({\r\n\t            background: color,\r\n\t            top: top + fontSize * 1.2,\r\n\t            left: left - 1,\r\n\t            width: this.ctx.measureText(content).width + 2,\r\n\t            height: 1\r\n\t        });\r\n\t    } else if (textDecoration === 'line-through') {\r\n\t        this.drawRect({\r\n\t            background: color,\r\n\t            top: top + fontSize * 0.6,\r\n\t            left: left - 1,\r\n\t            width: this.ctx.measureText(content).width + 2,\r\n\t            height: 1\r\n\t        });\r\n\t    }\r\n\t},\r\n\tdrawRect: function (params) {\r\n\t    // console.log(params)\r\n\t    const { background, top = 0, left = 0, width = 0, height = 0 } = params\r\n\t    this.ctx.save();\r\n\t    this.ctx.setFillStyle(background);\r\n\t    if (params.radius) {\r\n\t        this._drawRadiusRect(params);\r\n\t        this.ctx.fill();\r\n\t    }\r\n\t    else {\r\n\t        this.ctx.setFillStyle(background);\r\n\t        this.ctx.fillRect(left, top, width, height);\r\n\t    }\r\n\t    this.ctx.restore();\r\n\t},\r\n\tgetImageInfo: function (url) {\r\n\t    return new Promise((resolve, reject) => {\r\n\t        /* 获得要在画布上绘制的图片 */\r\n\t        if (this.cache[url]) {\r\n\t            resolve(this.cache[url]);\r\n\t        } else {\r\n\t            const objExp = new RegExp(/^http(s)?:\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- .\\/?%&=]*)?/);\r\n\t            if (objExp.test(url)) {\r\n\t\t\t\t\t\r\n\t                uni.getImageInfo({\r\n\t                    src: url,\r\n\t                    complete: res => {\r\n\t                        if (res.errMsg === 'getImageInfo:ok') {\r\n\t                            const img = {\r\n\t                                url,\r\n\t                                originWidth: res.width,\r\n\t                                originHeight: res.height,\r\n\t                                localPath: url //res.path\r\n\t                            };\r\n\t                            this.cache[url] = img;\r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t    title: '图片保存本地',\r\n\t\t\t\t\t\t\t\t    content: 'saveImageToLocal'+res.width\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t*/\r\n\t                            // console.log(res);\r\n\t                            // resolve(res.path)\r\n\t                            resolve(img);\r\n\t                        } else {\r\n\t                            reject(new Error('getImageInfo fail'));\r\n\t                        }\r\n\t                    }\r\n\t                });\r\n\t            } else {\r\n\t                this.cache[url] = {\r\n\t                    url,\r\n\t                    originWidth: 0,\r\n\t                    originHeight: 0,\r\n\t                    localPath: url\r\n\t                };\r\n\t                resolve(url);\r\n\t            }\r\n\t        }\r\n\t    })\r\n\t},\r\n\tsaveImageToLocal: function () {\r\n\t    const { width, height } = this;\r\n\t    uni.canvasToTempFilePath({\r\n\t        x: 0,\r\n\t        y: 0,\r\n\t        width,\r\n\t        height,\r\n\t        canvasId: 'canvasdrawer',\r\n\t        success: res => {\r\n\t            if (res.errMsg === 'canvasToTempFilePath:ok') {\r\n\t                this.isPainting = false;\r\n\t                this.imageList = [];\r\n\t                this.tempFileList = [];\r\n\t\t\t\t\tthis.shareImage = res.tempFilePath ;\r\n\t\t\t\t\twx.hideLoading();\r\n\t\t\t\t\t/*\r\n\t                this.$emit('success', {\r\n\t                    width,\r\n\t                    height,\r\n\t                    path: res.tempFilePath\r\n\t                });\r\n\t\t\t\t\t*/\r\n\t\t\t\t   /*\r\n\t\t\t\t   uni.showModal({\r\n\t\t\t\t       title: '图片保存本地完成',\r\n\t\t\t\t       content: 'isPainting:'+this.isPainting+' shareImage:'+this.shareImage\r\n\t\t\t\t   });\r\n\t\t\t\t   */\r\n\t            }\r\n\t        },\r\n\t\t\tfail: err => {\r\n\t\t\t\twx.hideLoading();\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t    title: '图片保存本地失败',\r\n\t\t\t\t    content: 'saveImageToLocal'+err\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t    }, this);\r\n\t},\r\n\t\r\n    setData: function (obj) {\r\n      let that = this;\r\n      let keys = [];\r\n      let val, data;\r\n      Object.keys(obj).forEach(function (key) {\r\n        keys = key.split('.');\r\n        val = obj[key];\r\n        data = that.$data;\r\n        keys.forEach(function (key2, index) {\r\n          if (index + 1 == keys.length) {\r\n            that.$set(data, key2, val);\r\n          } else {\r\n            if (!data[key2]) {\r\n              that.$set(data, key2, {});\r\n            }\r\n          }\r\n\r\n          data = data[key2];\r\n        });\r\n      });\r\n    }\r\n  }\r\n};\r\n","import mod from \"-!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wishshare.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wishshare.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}